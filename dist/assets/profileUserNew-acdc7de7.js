import{d as B,U as G,s as z,a as s,t as J,x as f,y as h,z as c,b as i,C as o,E as r,I as b,F as m,Q as N,V as A,O as P,p as C,a3 as k,N as _,a1 as H,a4 as L,J as Q,K as W}from"./index-cdcf547c.js";import{u as R}from"./use-menu-b48628b9.js";import{H as E}from"./HeaderCustomer-c7f48903.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const q=B({components:{Header:E},setup(){R().onSelectedKeys(["admin-users"]);const e=JSON.parse(localStorage.getItem("auth")),t=JSON.parse(localStorage.getItem("token"));console.log(t);const g="http://localhost:9000",D=G(),I=z();s([]);const w=s([]),y=s([]),v=s(null),u=s(!1),S=s(null),l=s({firstname:"",lastname:"",phoneNumber:"",address:""}),a=(n,d)=>{l[n]=d.target.value};s([]),s([]),s([]),s("0"),s("0"),s("0"),s("");const T=async()=>{try{const n=JSON.parse(localStorage.getItem("token")),d=await N.get(`${g}/api/v1/account/profile/view`,{headers:{Authorization:`Bearer ${n}`}});v.value=d.data.data,l.value={...d.data.data}}catch(n){console.error(n)}},O=()=>{u.value=!0},U=async()=>{try{const n=JSON.parse(localStorage.getItem("token")),d=new FormData;console.log(l.value.firstname,"cc"),d.append("firstname",l.value.firstname),d.append("lastname",l.value.lastname),d.append("phoneNumber",l.value.phoneNumber),d.append("address",l.value.address),await N.put(`${g}/api/v1/account/profile/update`,d,{headers:{Authorization:`Bearer ${n}`}}),A.success("Cập nhật thông tin thành công"),u.value=!1,T()}catch(n){console.error(n),A.error("Có lỗi xảy ra khi cập nhật thông tin")}},M=()=>{u.value=!1},V=()=>{N.get(`${g}/api/v1/admin/store/view`,{headers:{Authorization:`Bearer ${t}`}}).then(n=>{console.log(n.data.data,"response"),y.value=n.data.data}).catch(n=>{console.error(n)})},$=()=>{N.get(`${g}/api/v1/customer/favor/view`,{headers:{Authorization:`Bearer ${t}`}}).then(n=>{console.log(n.data.data,"response"),w.value=n.data.data}).catch(n=>{console.error(n)})};return J(()=>{V(),T(),$(),t||(localStorage.removeItem("token"),localStorage.removeItem("auth"),D.push("/login"))}),{route:I,router:D,allStores:y,stores:w,userLocal:e,userData:v,isModalVisible:u,form:S,formData:l,showModal:O,handleOk:U,handleCancel:M,handleInputChange:a}}}),p=e=>(Q("data-v-dec561a4"),e=e(),W(),e),K={id:"wrapper"},X={id:"main"},j={class:"user-profile"},Y={key:0,class:"card"},Z={class:"card-header"},x=["src"],ee={class:"card-body"},ae={class:"user-name"},te={class:"user-info"},oe=p(()=>o("strong",null,"Họ:",-1)),ne=p(()=>o("strong",null,"Tên:",-1)),se=p(()=>o("strong",null,"Số điện thoại:",-1)),le=p(()=>o("strong",null,"Địa chỉ:",-1)),de=p(()=>o("strong",null,"Mạng xã hội:",-1)),ie={class:"card-footer"},re={key:1,class:"loading"},ue={class:"css_select_div"},he=p(()=>o("option",{value:"0"},"Tỉnh Thành",-1)),ce=["value"],pe=p(()=>o("option",{value:"0"},"Quận Huyện",-1)),ve=["value"],me=p(()=>o("option",{value:"0"},"Phường Xã",-1)),ge=["value"],fe=P('<div id="footer" data-v-dec561a4><div class="f" style="padding:40px 0;" data-v-dec561a4><div class="wrap flexJus" data-v-dec561a4><div class="f flex" data-v-dec561a4><div class="fotb" style="width:30%;padding-right:30px;" data-v-dec561a4><img src="https://denled.com/Content/img/logo-foot.png" alt="Denled.com" width="286" height="60" data-v-dec561a4></div><div class="fotb" style="width:50%;padding:0 40px 0 60px;" data-v-dec561a4><label data-v-dec561a4>SHOWROOM</label><div class="muahang f flexC" data-v-dec561a4><div class="showrooms" data-v-dec561a4><ul data-v-dec561a4><li data-v-dec561a4>Hệ thống hỗ trợ quản lí và bán hàng tạp hóa</li><li data-v-dec561a4><span data-v-dec561a4>Địa chỉ 1 : </span>21C Trần Duy Hưng, Cầu Giấy, HN </li><li data-v-dec561a4><span data-v-dec561a4>Hotline : </span><a href="tel:0933665115" data-v-dec561a4>0933.66.5115</a></li></ul></div></div></div><div class="fotb" data-v-dec561a4><label data-v-dec561a4>THÔNG TIN - HƯỚNG DẪN</label><ul data-v-dec561a4><li data-v-dec561a4><a title="Giới Thiệu Hệ Thống" rel="nofollow" href="/" data-v-dec561a4>Giới Thiệu Hệ Thống</a></li><li data-v-dec561a4><a title="Giao hàng &amp; Thanh toán" rel="nofollow" href="/" data-v-dec561a4>Giao hàng &amp; Thanh toán</a></li><li data-v-dec561a4><a title="Hướng dẫn mua hàng Online" rel="nofollow" href="/" data-v-dec561a4>Hướng dẫn mua hàng Online</a></li><li data-v-dec561a4><a title="Quy chế hoạt động" rel="nofollow" href="/" data-v-dec561a4>Quy chế hoạt động</a></li></ul></div></div></div></div><div class="f p10 cen trang copyright" data-v-dec561a4> © 2024 bản quyền thuộc về HungNL@gmail.com <a href="https://denled.com" title="Siêu thị đèn LED" data-v-dec561a4>denled.com</a></div><ul id="panel" data-v-dec561a4><li data-v-dec561a4><img src="https://denled.com/Content/img/totop.svg" alt="To top" width="45" height="45" data-v-dec561a4></li><li style="padding-top:10px;padding-bottom:10px;" data-v-dec561a4><img alt="Messenger" src="https://denled.com/Content/img/messenger.svg" width="45" height="45" data-v-dec561a4></li><li data-v-dec561a4><img alt="Phone" src="https://denled.com/Content/img/phone.svg" width="45" height="45" data-v-dec561a4></li></ul><div class="zalo-chat-widget" data-oaid="2839194858446814357" data-welcome-message="Rất vui khi được hỗ trợ bạn!. Nếu bạn không thể chờ thì hãy gọi hoặc nhắn tin đến số điện thoại này 0973.66.5115." data-autopopup="1800" data-width="500" data-height="500" style="right:12px;" data-v-dec561a4></div></div>',1);function be(e,t,g,D,I,w){const y=f("Header"),v=f("a-input"),u=f("a-form-item"),S=f("a-form"),l=f("a-modal");return h(),c("div",K,[i(y),o("div",X,[o("div",j,[e.userData?(h(),c("div",Y,[o("div",Z,[o("img",{src:e.userData.avatar,alt:"User Avatar",class:"avatar"},null,8,x)]),o("div",ee,[o("h2",ae,r(e.userData.firstname)+" "+r(e.userData.lastname),1),o("div",te,[o("p",null,[oe,b(" "+r(e.userData.firstname||"N/A"),1)]),o("p",null,[ne,b(" "+r(e.userData.lastname||"N/A"),1)]),o("p",null,[se,b(" "+r(e.userData.phoneNumber||"N/A"),1)]),o("p",null,[le,b(" "+r(e.userData.phoneNumber||"N/A"),1)]),o("p",null,[de,b(" "+r(e.userData.socialContact||"N/A"),1)])])]),o("div",ie,[o("button",{onClick:t[0]||(t[0]=(...a)=>e.showModal&&e.showModal(...a)),class:"edit-button"},"Chỉnh sửa")])])):(h(),c("div",re,"Loading...")),i(l,{visible:e.isModalVisible,"onUpdate:visible":t[15]||(t[15]=a=>e.isModalVisible=a),title:"Chỉnh sửa thông tin",onOk:e.handleOk,onCancel:e.handleCancel},{default:m(()=>[i(S,{form:e.form,layout:"vertical"},{default:m(()=>[i(u,{label:"Họ"},{default:m(()=>[i(v,{value:e.formData.firstname,"onUpdate:value":t[1]||(t[1]=a=>e.formData.firstname=a),onInput:t[2]||(t[2]=a=>e.handleInputChange("firstname",a))},null,8,["value"])]),_:1}),i(u,{label:"Tên"},{default:m(()=>[i(v,{value:e.formData.lastname,"onUpdate:value":t[3]||(t[3]=a=>e.formData.lastname=a),onInput:t[4]||(t[4]=a=>e.handleInputChange("lastname",a))},null,8,["value"])]),_:1}),i(u,{label:"Số điện thoại"},{default:m(()=>[i(v,{value:e.formData.phoneNumber,"onUpdate:value":t[5]||(t[5]=a=>e.formData.phoneNumber=a),onInput:t[6]||(t[6]=a=>e.handleInputChange("phoneNumber",a))},null,8,["value"])]),_:1}),i(u,{label:"Địa chỉ"},{default:m(()=>[o("div",ue,[C(o("select",{class:"css_select","onUpdate:modelValue":t[7]||(t[7]=a=>e.selectedProvince=a),onChange:t[8]||(t[8]=(...a)=>e.fetchDistricts&&e.fetchDistricts(...a)),title:"Chọn Tỉnh Thành"},[he,(h(!0),c(_,null,H(e.provinces,a=>(h(),c("option",{key:a.id,value:a.id},r(a.full_name),9,ce))),128))],544),[[k,e.selectedProvince]]),C(o("select",{class:"css_select","onUpdate:modelValue":t[9]||(t[9]=a=>e.selectedDistrict=a),onChange:t[10]||(t[10]=(...a)=>e.fetchWards&&e.fetchWards(...a)),title:"Chọn Quận Huyện"},[pe,(h(!0),c(_,null,H(e.districts,a=>(h(),c("option",{key:a.id,value:a.id},r(a.full_name),9,ve))),128))],544),[[k,e.selectedDistrict]]),C(o("select",{class:"css_select","onUpdate:modelValue":t[11]||(t[11]=a=>e.selectedWard=a),onChange:t[12]||(t[12]=(...a)=>e.updateAddress&&e.updateAddress(...a)),title:"Chọn Phường Xã"},[me,(h(!0),c(_,null,H(e.wards,a=>(h(),c("option",{key:a.id,value:a.id},r(a.full_name),9,ge))),128))],544),[[k,e.selectedWard]]),C(o("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=a=>e.houseNumber=a),onInput:t[14]||(t[14]=(...a)=>e.updateAddress&&e.updateAddress(...a)),placeholder:"Số nhà"},null,544),[[L,e.houseNumber]])])]),_:1})]),_:1},8,["form"])]),_:1},8,["visible","onOk","onCancel"])])]),fe])}const we=F(q,[["render",be],["__scopeId","data-v-dec561a4"]]);export{we as default};
