import{d as K,R as z,D as W,B as j,S as X,s as Y,a as h,U as Z,r as tt,t as at,x as O,y as f,z as u,b as w,C as t,N,a1 as T,F as k,V as b,O as et,E as d,M as ot,J as st,K as nt}from"./index-cdcf547c.js";import"./use-menu-b48628b9.js";import{H as it}from"./HeaderCustomer-c7f48903.js";import{_ as rt}from"./_plugin-vue_export-helper-c27b6911.js";const lt=K({components:{"a-form":z,"a-form-item":z.Item,"a-drawer":W,"a-button":j,"a-input-number":X,Header:it},setup(){const s=Y(),i="http://localhost:9000";s.params.id;const C=h([]),S=h([]),g=h(!1),_=h(!1),p=h(0),$=h(null),y=Z(),o=JSON.parse(localStorage.getItem("auth")),n=JSON.parse(localStorage.getItem("token")),D=h([]),I=h(""),l=tt({currentPage:1,pageSize:10,totalItems:0,totalPages:0}),F=()=>{g.value=!0,V()},B=()=>{_.value=!0},x=()=>{_.value=!1},H=()=>{g.value=!1},v=async(a,e,c="")=>{try{const r=await axios.get(`${i}/api/v1/customer/cartitem/view`,{headers:{Authorization:`Bearer ${n}`},params:{page:a,size:e,keyword:c}});console.log(r.data,"data"),C.value=r.data.data,l.totalItems=r.data.pagination.totalItems,l.totalPages=r.data.pagination.totalPages,p.value=0,await r.data.data.forEach(J=>{p.value+=J.priceTotal})}catch(r){console.error(r)}},P=async(a,e,c="")=>{const r=await axios.get(`${i}/api/v1/customer/favor/view`,{headers:{Authorization:`Bearer ${n}`},params:{page:a,size:e,keyword:c}});S.value=r.data.data,l.totalItems=r.data.pagination.totalItems,l.totalPages=r.data.pagination.totalPages},A=async a=>{try{await axios.get(`${i}/api/v1/customer/order/delete/${a}`,{headers:{Authorization:`Bearer ${n}`}}),b.success("Hủy thành công"),setTimeout(()=>{window.location.reload()},350)}catch(e){console.error(e)}},M=async a=>{const e=new FormData;e.append("storeid",a);try{await axios({method:"delete",url:`${i}/api/v1/customer/favor/remove`,data:e,headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}}),b.success("Hủy thành công"),setTimeout(()=>{window.location.reload()},350)}catch(c){console.error(c)}},V=async()=>{try{const a=await axios.get(`${i}/api/v1/customer/orderdetail/view`,{headers:{Authorization:`Bearer ${n}`}});console.log(a.data,"data"),D.value=a.data.data}catch(a){console.error(a)}},q=async a=>{const e=new FormData;e.append("cartitemid",a),await axios.post(`${i}/api/v1/customer/order/insert/cartitem`,e,{headers:{Authorization:`Bearer ${n}`}}),alert("Mua thành công"),v()};console.log(p,"1");const U=async a=>{new FormData;try{const e=await axios.get(`${i}/api/v1/customer/cartitem/delete?cartitemid=${a}`,{headers:{Authorization:`Bearer ${n}`}});v()}catch(e){console.error(e)}},G=async a=>{try{if(a.quantity<=1){new FormData().append("cartitemid",a.cartItemId);const c=await axios.get(`${i}/api/v1/customer/cartitem/delete?cartitemid=${a.cartItemId}`,{headers:{Authorization:`Bearer ${n}`}})}else{const e=new FormData,c=a.quantity-1;e.append("quantity",c),e.append("cartitemid",a.cartItemId),console.log(c);const r=await axios.put(`${i}/api/v1/customer/cartitem/update`,e,{headers:{Authorization:`Bearer ${n}`}})}v()}catch(e){console.error(e)}},L=async a=>{try{const e=new FormData,c=a.quantity+1;e.append("quantity",c),e.append("cartitemid",a.cartItemId),console.log(c);const r=await axios.put(`${i}/api/v1/customer/cartitem/update`,e,{headers:{Authorization:`Bearer ${n}`}});v()}catch(e){console.error(e)}},Q=()=>{$.value.validateFields(a=>{a?b.error("Please input the correct quantity!"):(b.success("Quantity submitted successfully!"),H())})},R=(a,e)=>{l.currentPage=a,l.pageSize=e,P(a,e,I.value)},E=()=>{l.currentPage=1,P(l.currentPage,l.pageSize,I.value)};return at(()=>{P(l.currentPage,l.pageSize),v()}),{router:y,route:s,product:C,userLocal:o,deleteProduct:U,searchKeyword:I,onChange:R,onSearch:E,decrement:G,increment:L,allTotal:p,byProductCart:q,isDrawerVisible:g,showDrawer:F,handleClose:H,handleSubmit:Q,isDrawerVisible2:_,handleClose2:x,showDrawer2:B,cancelOderMyFarvor:M,myOrder:D,myFarve:S,pageParam:l,cancelOder:A}}}),m=s=>(st("data-v-85fff55c"),s=s(),nt(),s),ct={id:"wrapper"},dt={id:"main"},ht={class:"orderbox"},ft=m(()=>t("h1",{style:{padding:"30px"}},"Danh sách cửa hàng yêu thích",-1)),ut={class:"giohang orderhome"},mt={name:"giohang",id:"cart"},pt={class:"listcart"},vt={class:"oimg"},gt=["src","alt"],_t={class:"oname"},yt={style:{float:"right"}},wt=["onClick"],bt=m(()=>t("input",{type:"submit",name:"_w_action[UpdatePOST]",style:{display:"none"}},null,-1)),Ct=m(()=>t("input",{type:"hidden",name:"_w_action",value:"UpdatePOST"},null,-1)),St={class:"col-12"},$t=et('<div id="footer" data-v-85fff55c><div class="f" style="padding:40px 0;" data-v-85fff55c><div class="wrap flexJus" data-v-85fff55c><div class="f flex" data-v-85fff55c><div class="fotb" style="width:30%;padding-right:30px;" data-v-85fff55c><img src="https://denled.com/Content/img/logo-foot.png" alt="Denled.com" width="286" height="60" data-v-85fff55c></div><div class="fotb" style="width:50%;padding:0 40px 0 60px;" data-v-85fff55c><label data-v-85fff55c>SHOWROOM</label><div class="muahang f flexC" data-v-85fff55c><div class="showrooms" data-v-85fff55c><ul data-v-85fff55c><li data-v-85fff55c>Hệ thống hỗ trợ quản lí và bán hàng tạp hóa</li><li data-v-85fff55c><span data-v-85fff55c>Địa chỉ 1 : </span>21C Trần Duy Hưng, Cầu Giấy, HN </li><li data-v-85fff55c><span data-v-85fff55c>Hotline : </span><a href="tel:0933665115" data-v-85fff55c>0933.66.5115</a></li></ul></div></div></div><div class="fotb" data-v-85fff55c><label data-v-85fff55c>THÔNG TIN - HƯỚNG DẪN</label><ul data-v-85fff55c><li data-v-85fff55c><a title="Giới Thiệu Hệ Thống" rel="nofollow" href="/" data-v-85fff55c>Giới Thiệu Hệ Thống</a></li><li data-v-85fff55c><a title="Giao hàng &amp; Thanh toán" rel="nofollow" href="/" data-v-85fff55c>Giao hàng &amp; Thanh toán</a></li><li data-v-85fff55c><a title="Hướng dẫn mua hàng Online" rel="nofollow" href="/" data-v-85fff55c>Hướng dẫn mua hàng Online</a></li><li data-v-85fff55c><a title="Quy chế hoạt động" rel="nofollow" href="/" data-v-85fff55c>Quy chế hoạt động</a></li></ul></div></div></div></div><div class="f p10 cen trang copyright" data-v-85fff55c> © 2024 bản quyền thuộc về HungNL@gmail.com <a href="https://denled.com" title="Siêu thị đèn LED" data-v-85fff55c>denled.com</a></div><ul id="panel" data-v-85fff55c><li data-v-85fff55c><img src="https://denled.com/Content/img/totop.svg" alt="To top" width="45" height="45" data-v-85fff55c></li><li style="padding-top:10px;padding-bottom:10px;" data-v-85fff55c><img alt="Messenger" src="https://denled.com/Content/img/messenger.svg" width="45" height="45" data-v-85fff55c></li><li data-v-85fff55c><img alt="Phone" src="https://denled.com/Content/img/phone.svg" width="45" height="45" data-v-85fff55c></li></ul><div class="zalo-chat-widget" data-oaid="2839194858446814357" data-welcome-message="Rất vui khi được hỗ trợ bạn!. Nếu bạn không thể chờ thì hãy gọi hoặc nhắn tin đến số điện thoại này 0973.66.5115." data-autopopup="1800" data-width="500" data-height="500" style="right:12px;" data-v-85fff55c></div></div>',1),Dt={class:"giohang orderhome"},It={name:"giohang",id:"cart"},Pt={class:"listcart"},Ot={class:"oimg"},Nt=["src","alt"],Tt={class:"oname"},Ht={style:{float:"left"}},zt={key:0,style:{float:"right"}},kt=["onClick"],Ft=m(()=>t("input",{type:"submit",name:"_w_action[UpdatePOST]",style:{display:"none"}},null,-1)),Bt=m(()=>t("input",{type:"hidden",name:"_w_action",value:"UpdatePOST"},null,-1)),xt={class:"giohang orderhome"},At={name:"giohang",id:"cart"},Mt={class:"listcart"},Vt={class:"oimg"},qt=["src","alt"],Ut={class:"oname"},Gt={style:{float:"right"}},Lt=["onClick"],Qt=m(()=>t("input",{type:"submit",name:"_w_action[UpdatePOST]",style:{display:"none"}},null,-1)),Rt=m(()=>t("input",{type:"hidden",name:"_w_action",value:"UpdatePOST"},null,-1));function Et(s,i,C,S,g,_){const p=O("Header"),$=O("a-pagination"),y=O("a-drawer");return f(),u("div",ct,[w(p),t("div",dt,[t("div",ht,[ft,t("div",ut,[t("form",mt,[t("ul",pt,[(f(!0),u(N,null,T(s.myFarve,o=>(f(),u("li",{key:o.orderDetailId,class:"cartitem"},[t("div",vt,[t("a",null,[t("img",{src:o.image,alt:o.title},null,8,gt)])]),t("div",_t,[t("h3",null,d(o.storeName),1),t("label",null,d(o.orderStatusName),1),t("p",null,d(o.storeAddress),1),t("div",yt,[t("button",{type:"button",onClick:n=>s.cancelOderMyFarvor(o.storeId),class:"btn"}," Hủy thích ",8,wt)])])]))),128))]),bt,Ct])])]),t("div",St,[w($,{onChange:s.onChange,current:s.pageParam.currentPage,"onUpdate:current":i[0]||(i[0]=o=>s.pageParam.currentPage=o),total:s.pageParam.totalItems,pageSize:s.pageParam.pageSize,"show-total":(o,n)=>`${n[0]}-${n[1]} của ${o} sản phẩm`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])]),$t,t("div",null,[w(y,{title:"Danh sách đơn hàng đã đặt",visible:s.isDrawerVisible,width:850,onClose:s.handleClose,destroyOnClose:!0},{default:k(()=>[t("div",Dt,[t("form",It,[t("ul",Pt,[(f(!0),u(N,null,T(s.myOrder,o=>{var n;return f(),u("li",{key:o.orderDetailId,class:"cartitem"},[t("div",Ot,[t("a",null,[t("img",{src:o.productImg,alt:s.product.title},null,8,Nt)])]),t("div",Tt,[t("h3",null,d(o.productName),1),t("label",null,d(o.orderStatusName),1),t("label",Ht,d((n=o.priceTotal)==null?void 0:n.toLocaleString())+"₫",1),o.orderStatusName=="Đặt hàng thành công"?(f(),u("div",zt,[t("button",{type:"button",onClick:D=>s.cancelOder(o.orderDetailId),class:"btn"}," Hủy đơn ",8,kt)])):ot("",!0)])])}),128))]),Ft,Bt])])]),_:1},8,["visible","onClose"]),w(y,{title:"Danh sách cửa hàng bạn thích",visible:s.isDrawerVisible2,width:850,onClose:s.handleClose2,destroyOnClose:!0},{default:k(()=>[t("div",xt,[t("form",At,[t("ul",Mt,[(f(!0),u(N,null,T(s.myFarve,o=>(f(),u("li",{key:o.orderDetailId,class:"cartitem"},[t("div",Vt,[t("a",null,[t("img",{src:o.image,alt:o.title},null,8,qt)])]),t("div",Ut,[t("h3",null,d(o.storeName),1),t("label",null,d(o.orderStatusName),1),t("p",null,d(o.storeAddress),1),t("div",Gt,[t("button",{type:"button",onClick:n=>s.cancelOderMyFarvor(o.storeId),class:"btn"}," Hủy thích ",8,Lt)])])]))),128))]),Qt,Rt])])]),_:1},8,["visible","onClose"])])])}const Xt=rt(lt,[["render",Et],["__scopeId","data-v-85fff55c"]]);export{Xt as default};
