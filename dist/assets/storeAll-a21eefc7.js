import{d as B,r as q,u as j,v as x,a as $,x as F,E as I,o as U,b as r,e as u,z as O,w as c,q as A,y as m,g as d,h as i,j as w,f as y,t as _,l as p}from"./index-64ce397b.js";import{u as R}from"./use-menu-6afec9f3.js";import{A as z}from"./ApiUser-37b3c88e.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const D=B({setup(){R().onSelectedKeys(["admin-users"]);const o=q(j().user.roleClaimDetail),h="http://localhost:9000",P=x(),t=$(),l=q([]),f=q([]),s=F({current:Object.keys(t.query).length>0?t.query.PageNumber:1,pageNumber:Object.keys(t.query).length>0?t.query.PageNumber:1,pageSize:Object.keys(t.query).length>0?t.query.PageSize:10,totalRecord:0,userName:Object.keys(t.query).length>0?t.query.UserName:"",statusFilter:!1}),k=[{title:"#",key:"index"},{title:"Tên cửa hàng",dataIndex:"userName",key:"userName"},{title:"Sđt",dataIndex:"fullName",key:"fullName"},{title:"Loại",key:"email"},{title:"Tác vụ",key:"action",fixed:"right"}],b=JSON.parse(localStorage.getItem("token")),n=a=>{A.get(`${h}/api/v1/admin/store/view`,{headers:{Authorization:`Bearer ${b}`}}).then(e=>{console.log(e.data.data,"response"),f.value=e.data.data}).catch(e=>{console.error(e)})},N=a=>{z.DeleteById(a).then(e=>{console.log(e),e.status==200&&m.success("Xóa thành công!"),n()}).catch(e=>{m.error(e.message),e.response.data.hasOwnProperty("errors")?l.value=e.response.data.errors:l.value=e.response.data})},v=a=>{z.BannedById(a).then(e=>{e.status==200?m.success("Khóa thành công!"):m.error("Lỗi! Tác vụ thực hiện không thành công."),n()}).catch(e=>{m.error(e.message),e.response.data.hasOwnProperty("errors")?l.value=e.response.data.errors:l.value=e.response.data})};I(()=>{Object.keys(t.query).length===0&&(s.current=Object.keys(t.query).length>0?t.query.PageNumber:1,s.pageNumber=Object.keys(t.query).length>0?t.query.PageNumber:1,s.pageSize=Object.keys(t.query).length>0?t.query.PageSize:10,s.userName=Object.keys(t.query).length>0?t.query.UserName:"",s.statusFilter=!0,n())}),U(()=>{n()});function S(a,e){s.pageNumber=a,s.pageSize=e,s.statusFilter=!0,n()}return{route:t,router:P,authStoreClaim:o,errors:l,users:f,columns:k,pageParam:s,onChange:S,clickFrmFilter:a=>{s.statusFilter=!0,n()},confirmRemove:N,confirmBanned:v}}}),K={class:"row mb-3"},V={class:"col-6"},E={class:"row"},L={class:"col-12"},M={key:0},J={key:1},X={key:2},Y={key:3},G={class:"col-12"};function H(o,h,P,t,l,f){const s=r("a-breadcrumb-item"),k=r("a-breadcrumb"),b=r("a-button"),n=r("router-link"),N=r("a-popconfirm"),v=r("a-table"),S=r("a-pagination"),C=r("a-card");return u(),O(C,{style:{width:"100%"}},{default:c(()=>[d("div",K,[d("div",V,[i(k,null,{default:c(()=>[i(s,null,{default:c(()=>[w("Danh sách cửa hàng")]),_:1})]),_:1})])]),d("div",E,[d("div",L,[i(v,{dataSource:o.users,columns:o.columns,scroll:{x:576},pagination:!1},{bodyCell:c(({column:a,index:e,record:g})=>[a.key==="index"?(u(),y("span",M,_(e+1),1)):p("",!0),a.key==="userName"?(u(),y("span",J,_(g.storeName),1)):p("",!0),a.key==="fullName"?(u(),y("span",X,_(g.phoneNumber),1)):p("",!0),a.key==="email"?(u(),y("span",Y,_(g.storeType),1)):p("",!0),a.key==="action"&&o.authStoreClaim!==null?(u(),O(N,{key:4,title:"Bạn muốn Khóa bản ghi này?","ok-text":"Yes","cancel-text":"No"},{default:c(()=>[i(n,{to:{name:"ProductByStore",params:{id:g.storeId}}},{default:c(()=>[i(b,{title:"Khóa",type:"dashed",size:"small",shape:"",class:"me-2 text-warning"},{default:c(()=>[w(" sản phẩm ")]),_:1})]),_:2},1032,["to"])]),_:2},1024)):p("",!0)]),_:1},8,["dataSource","columns"]),d("div",G,[i(S,{onChange:o.onChange,current:o.pageParam.current,"onUpdate:current":h[0]||(h[0]=a=>o.pageParam.current=a),total:o.pageParam.totalRecord,pageSize:o.pageParam.pageSize,"show-total":(a,e)=>`${e[0]}-${e[1]} of ${a} items`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])])])]),_:1})}const te=T(D,[["render",H]]);export{te as default};
