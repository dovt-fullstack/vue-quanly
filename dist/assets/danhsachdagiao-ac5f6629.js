import{d as T,s as I,D as z,B as P,r as p,u as B,v as q,a as V,x as O,o as R,b as c,e as n,f as l,h as u,w as m,F as j,q as $,g as o,j as D,t as s,l as i,z as A}from"./index-64ce397b.js";import{u as F}from"./use-menu-6afec9f3.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const M=T({components:{"a-form":I,"a-form-item":I.Item,"a-drawer":z,"a-button":P},setup(){F().onSelectedKeys(["admin-users"]),p(B().user.roleClaimDetail);const e="http://localhost:9000";q();const d=V();p([]);const f=p([]),h=p(!1),b=p({}),g=O({current:Object.keys(d.query).length>0?d.query.PageNumber:1,pageSize:Object.keys(d.query).length>0?d.query.PageSize:10,totalRecord:0}),C=[{title:"#",key:"index"},{title:"Tên cửa hàng",dataIndex:"userName",key:"userName"},{title:"Tên sản phẩm",dataIndex:"fullName",key:"fullName"},{title:"Số lượng",key:"email"},{title:"Tên sản phẩm",key:"email2"},{title:"Ảnh",key:"email3"},{title:"Tổng tiền",key:"email4"},{title:"Tác vụ",key:"action",fixed:"right"}],_=JSON.parse(localStorage.getItem("token")),y=()=>{$.get(`${e}/api/v1/shipper/orderlist/shipped`,{headers:{Authorization:`Bearer ${_}`}}).then(t=>{f.value=t.data.data}).catch(t=>{console.error(t)})},k=()=>{h.value=!0},v=()=>{h.value=!1},S=async t=>{k();try{const{data:a}=await $.get(`${e}/api/v1/shipper/orderdetail?orderid=${t}`,{headers:{Authorization:`Bearer ${_}`}});a.status==="OK"?b.value=a.data:console.error(a.message)}catch(a){console.error(a)}},w=(t,a)=>{g.current=t,g.pageSize=a,y()};return R(()=>{y()}),{users:f,columns:C,isDrawerVisible:h,dataId:b,getIdDh:S,handleClose:v,showDrawer:k,onChange:w,pageParam:g}}}),U={class:"row mb-3"},E={class:"col-6"},J={class:"row"},L={class:"col-12"},G={key:0},H={key:1},Q={key:2},W={key:3},X={key:4},Y=["src","alt"],Z={key:6},x={class:"col-12"},ee={class:"giohang orderhome"},te={style:{color:"black"}};function ae(e,d,f,h,b,g){const C=c("a-breadcrumb-item"),_=c("a-breadcrumb"),y=c("a-button"),k=c("a-table"),v=c("a-pagination"),S=c("a-card"),w=c("a-drawer");return n(),l(j,null,[u(S,{style:{width:"100%"}},{default:m(()=>[o("div",U,[o("div",E,[u(_,null,{default:m(()=>[u(C,null,{default:m(()=>[D("Danh sách đơn đã giao")]),_:1})]),_:1})])]),o("div",J,[o("div",L,[u(k,{dataSource:e.users,columns:e.columns,scroll:{x:576},pagination:!1},{bodyCell:m(({column:t,index:a,record:r})=>{var N;return[t.key==="index"?(n(),l("span",G,s(a+1),1)):i("",!0),t.key==="userName"?(n(),l("span",H,s(r.storeName),1)):i("",!0),t.key==="fullName"?(n(),l("span",Q,s(r.productName),1)):i("",!0),t.key==="email"?(n(),l("span",W,s(r.quantity),1)):i("",!0),t.key==="email2"?(n(),l("span",X,s(r.productName),1)):i("",!0),t.key==="email3"?(n(),l("img",{key:5,style:{width:"50px !important"},src:r.productImg,alt:r.productImg},null,8,Y)):i("",!0),t.key==="email4"?(n(),l("span",Z,s((N=r.priceTotal)==null?void 0:N.toLocaleString())+" VND",1)):i("",!0),t.key==="action"&&e.authStoreClaim!==null?(n(),A(y,{key:7,onClick:oe=>e.getIdDh(r.orderDetailId),type:"dashed",size:"small",title:"Sửa"},{default:m(()=>[D(" Chi tiết ")]),_:2},1032,["onClick"])):i("",!0)]}),_:1},8,["dataSource","columns"]),o("div",x,[u(v,{onChange:e.onChange,current:e.pageParam.current,"onUpdate:current":d[0]||(d[0]=t=>e.pageParam.current=t),total:e.pageParam.totalRecord,pageSize:e.pageParam.pageSize,"show-total":(t,a)=>`${a[0]}-${a[1]} of ${t} items`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])])])]),_:1}),u(w,{title:"Chi tiết",visible:e.isDrawerVisible,width:850,onClose:e.handleClose,destroyOnClose:!0},{default:m(()=>[o("div",ee,[o("p",te,"Tên khách hàng: "+s(e.dataId.customerName),1),o("p",null,"Số điện thoại: "+s(e.dataId.customerPhone),1),o("p",null,"Tổng tiền: "+s(e.dataId.priceTotal),1),o("p",null,"Tên sản phẩm: "+s(e.dataId.productName),1),o("p",null,"Số lượng: "+s(e.dataId.quantity),1),o("p",null,"Địa chỉ: "+s(e.dataId.address),1)])]),_:1},8,["visible","onClose"])],64)}const le=K(M,[["render",ae]]);export{le as default};
