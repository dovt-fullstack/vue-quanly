import{d as T,a as f,q as D,U,s as A,r as E,Y as K,t as R,x as h,y as l,W as V,F as c,Q as M,V as b,C as y,b as i,I as P,z as u,E as p,M as d,N as J}from"./index-cdcf547c.js";import{u as G}from"./use-menu-b48628b9.js";import{A as x}from"./ApiUser-6badb945.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const Q=T({setup(){G().onSelectedKeys(["admin-users"]);const o=f(D().user.roleClaimDetail),N="http://localhost:9000",w=U(),t=A(),g=f([]),$=f([]);f();const q=f(t.params.id);console.log(q._value,"storeId2");const S=JSON.parse(localStorage.getItem("auth")).storeId,r=E({current:Object.keys(t.query).length>0?t.query.PageNumber:1,pageNumber:Object.keys(t.query).length>0?t.query.PageNumber:1,pageSize:Object.keys(t.query).length>0?t.query.PageSize:10,totalRecord:0,userName:Object.keys(t.query).length>0?t.query.UserName:"",statusFilter:!1}),k=[{title:"#",key:"index"},{title:"Tên cửa hàng",dataIndex:"userName",key:"userName"},{title:"Số lượng",dataIndex:"imageSp",key:"imageSp"},{title:"Tên sản phẩm",dataIndex:"fullName",key:"fullName"},{title:"Ngày nhập",dataIndex:"date",key:"date"},{title:"Giá",key:"email"},{title:"Tổng tiền",key:"alltotal"},{title:"Tình trạng sản phẩm",key:"status"},{title:"Tác vụ",key:"action",fixed:"right"}],v=JSON.parse(localStorage.getItem("token")),I=a=>{try{const e=a.slice(2,4),O=a.slice(5,7),z=a.slice(8,10),j=a.slice(11,13),B=a.slice(14,16),F=a.slice(17,19);return`${j}:${B}:${F}    ${z}-${O}-${e}`}catch(e){return console.error("Error formatting date:",e),"Invalid date"}return`${hours}:${minutes}:${seconds} ${day}-${month}-${year}`},m=a=>{M.get(`${N}/api/v1/management/${S}/import/view`,{headers:{Authorization:`Bearer ${v}`}}).then(e=>{console.log(e.data.data,"response"),$.value=e.data.data}).catch(e=>{console.error(e)})},s=a=>{x.DeleteById(a).then(e=>{console.log(e),e.status==200&&b.success("Xóa thành công!"),m()}).catch(e=>{b.error(e.message),e.response.data.hasOwnProperty("errors")?g.value=e.response.data.errors:g.value=e.response.data})},_=a=>{if(a.deleted)return"Đã xóa";switch(a.productStatus){case 0:return"Ngừng bán";case 1:return"Đang bán";case 3:return"Bị cấm";default:return"Không rõ"}},n=a=>{x.BannedById(a).then(e=>{e.status==200?b.success("Khóa thành công!"):b.error("Lỗi! Tác vụ thực hiện không thành công."),m()}).catch(e=>{b.error(e.message),e.response.data.hasOwnProperty("errors")?g.value=e.response.data.errors:g.value=e.response.data})};K(()=>{Object.keys(t.query).length===0&&(r.current=Object.keys(t.query).length>0?t.query.PageNumber:1,r.pageNumber=Object.keys(t.query).length>0?t.query.PageNumber:1,r.pageSize=Object.keys(t.query).length>0?t.query.PageSize:10,r.userName=Object.keys(t.query).length>0?t.query.UserName:"",r.statusFilter=!0,m())}),R(()=>{m()});function C(a,e){r.pageNumber=a,r.pageSize=e,r.statusFilter=!0,m()}return{route:t,getStatus:_,router:w,storeId2:q,storeId:S,authStoreClaim:o,errors:g,users:$,columns:k,pageParam:r,onChange:C,formatDate:I,clickFrmFilter:a=>{r.statusFilter=!0,m()},confirmRemove:s,confirmBanned:n}}}),W={class:"row mb-3"},X={class:"col-6"},Y={class:"col-6 d-flex justify-content-end"},H=y("i",{class:"fa-solid fa-plus"},null,-1),Z={class:"row"},ee={class:"col-12"},te={key:0},ae={key:1},se={key:2},ne={key:3},oe={key:4},re={key:5},le={key:6},ce={key:7},ie={class:"col-12"};function ue(o,N,w,t,g,$){const q=h("a-breadcrumb-item"),S=h("a-breadcrumb"),r=h("router-link"),k=h("a-button"),v=h("a-table"),I=h("a-pagination"),m=h("a-card");return l(),V(m,{style:{width:"100%"}},{default:c(()=>[y("div",W,[y("div",X,[i(S,null,{default:c(()=>[i(q,null,{default:c(()=>[P(" Danh sách các hóa đơn nhập hàng")]),_:1})]),_:1})]),y("div",Y,[i(k,{type:"primary",title:"Thêm mới"},{default:c(()=>[i(r,{to:{name:"importExport/add-new",params:{id:o.storeId}}},{default:c(()=>[H]),_:1},8,["to"])]),_:1})])]),y("div",Z,[y("div",ee,[i(v,{dataSource:o.users,columns:o.columns,scroll:{x:576},pagination:!1},{bodyCell:c(({column:s,index:_,record:n})=>[s.key==="index"?(l(),u("span",te,p(_+1),1)):d("",!0),s.key==="userName"?(l(),u("span",ae,p(n.storeName),1)):d("",!0),s.key==="imageSp"?(l(),u("span",se,p(n.quantity),1)):d("",!0),s.key==="fullName"?(l(),u("span",ne,p(n.productName),1)):d("",!0),s.key==="date"?(l(),u("span",oe,p(o.formatDate(n.createdAt)),1)):d("",!0),s.key==="email"?(l(),u("span",re,p(n.price),1)):d("",!0),s.key==="alltotal"?(l(),u("span",le,p(n.priceTotal),1)):d("",!0),s.key==="status"?(l(),u("span",ce,p(o.getStatus(n)),1)):d("",!0),s.key==="action"&&o.authStoreClaim!==null&&o.getStatus(n)!=="Đã xóa"?(l(),u(J,{key:8},[i(r,{to:{name:"admin-chi-tiet-san-pham",params:{id:n.productId}}},{default:c(()=>[i(k,{title:"Khóa",type:"dashed",size:"small",shape:"",class:"me-2 text-warning"},{default:c(()=>[P("xem ")]),_:1})]),_:2},1032,["to"]),i(r,{to:{name:"hoa-don/sua",params:{id:n.importDetailId},query:{productName:n.productName,quantity:n.quantity,price:n.price}}},{default:c(()=>[i(k,{title:"Khóa",type:"dashed",size:"small",shape:"",class:"me-2 text-warning"},{default:c(()=>[P("sửa ")]),_:1})]),_:2},1032,["to"])],64)):d("",!0)]),_:1},8,["dataSource","columns"]),y("div",ie,[i(I,{onChange:o.onChange,current:o.pageParam.current,"onUpdate:current":N[0]||(N[0]=s=>o.pageParam.current=s),total:o.pageParam.totalRecord,pageSize:o.pageParam.pageSize,"show-total":(s,_)=>`${_[0]}-${_[1]} of ${s} items`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])])])]),_:1})}const ge=L(Q,[["render",ue]]);export{ge as default};
