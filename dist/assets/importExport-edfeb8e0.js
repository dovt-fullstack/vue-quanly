import{d as T,r as k,u as D,v as U,a as A,x as E,E as K,o as R,b as h,e as l,z as V,w as c,q as J,y as b,g as y,h as i,j as w,f as u,t as p,l as d,F as M}from"./index-64ce397b.js";import{u as G}from"./use-menu-6afec9f3.js";import{A as x}from"./ApiUser-37b3c88e.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const X=T({setup(){G().onSelectedKeys(["admin-users"]);const o=k(D().user.roleClaimDetail),N="http://localhost:9000",P=U(),t=A(),g=k([]),S=k([]);k();const q=k(t.params.id);console.log(q._value,"storeId2");const v=JSON.parse(localStorage.getItem("auth")).storeId,r=E({current:Object.keys(t.query).length>0?t.query.PageNumber:1,pageNumber:Object.keys(t.query).length>0?t.query.PageNumber:1,pageSize:Object.keys(t.query).length>0?t.query.PageSize:10,totalRecord:0,userName:Object.keys(t.query).length>0?t.query.UserName:"",statusFilter:!1}),f=[{title:"#",key:"index"},{title:"Tên cửa hàng",dataIndex:"userName",key:"userName"},{title:"Số lượng",dataIndex:"imageSp",key:"imageSp"},{title:"Tên sản phẩm",dataIndex:"fullName",key:"fullName"},{title:"Ngày nhập",dataIndex:"date",key:"date"},{title:"Giá",key:"email"},{title:"Tổng tiền",key:"alltotal"},{title:"Tình trạng sản phẩm",key:"status"},{title:"Tác vụ",key:"action",fixed:"right"}],$=JSON.parse(localStorage.getItem("token")),I=a=>{try{const e=a.slice(2,4),z=a.slice(5,7),C=a.slice(8,10),j=a.slice(11,13),B=a.slice(14,16),F=a.slice(17,19);return`${j}:${B}:${F}    ${C}-${z}-${e}`}catch(e){return console.error("Error formatting date:",e),"Invalid date"}return`${hours}:${minutes}:${seconds} ${day}-${month}-${year}`},m=a=>{J.get(`${N}/api/v1/management/${v}/import/view`,{headers:{Authorization:`Bearer ${$}`}}).then(e=>{console.log(e.data.data,"response"),S.value=e.data.data}).catch(e=>{console.error(e)})},s=a=>{x.DeleteById(a).then(e=>{console.log(e),e.status==200&&b.success("Xóa thành công!"),m()}).catch(e=>{b.error(e.message),e.response.data.hasOwnProperty("errors")?g.value=e.response.data.errors:g.value=e.response.data})},_=a=>{if(a.deleted)return"Đã xóa";switch(a.productStatus){case 0:return"Ngừng bán";case 1:return"Đang bán";case 3:return"Bị cấm";default:return"Không rõ"}},n=a=>{x.BannedById(a).then(e=>{e.status==200?b.success("Khóa thành công!"):b.error("Lỗi! Tác vụ thực hiện không thành công."),m()}).catch(e=>{b.error(e.message),e.response.data.hasOwnProperty("errors")?g.value=e.response.data.errors:g.value=e.response.data})};K(()=>{Object.keys(t.query).length===0&&(r.current=Object.keys(t.query).length>0?t.query.PageNumber:1,r.pageNumber=Object.keys(t.query).length>0?t.query.PageNumber:1,r.pageSize=Object.keys(t.query).length>0?t.query.PageSize:10,r.userName=Object.keys(t.query).length>0?t.query.UserName:"",r.statusFilter=!0,m())}),R(()=>{m()});function O(a,e){r.pageNumber=a,r.pageSize=e,r.statusFilter=!0,m()}return{route:t,getStatus:_,router:P,storeId2:q,storeId:v,authStoreClaim:o,errors:g,users:S,columns:f,pageParam:r,onChange:O,formatDate:I,clickFrmFilter:a=>{r.statusFilter=!0,m()},confirmRemove:s,confirmBanned:n}}}),H={class:"row mb-3"},Q={class:"col-6"},W={class:"col-6 d-flex justify-content-end"},Y=y("i",{class:"fa-solid fa-plus"},null,-1),Z={class:"row"},ee={class:"col-12"},te={key:0},ae={key:1},se={key:2},ne={key:3},oe={key:4},re={key:5},le={key:6},ce={key:7},ie={class:"col-12"};function ue(o,N,P,t,g,S){const q=h("a-breadcrumb-item"),v=h("a-breadcrumb"),r=h("router-link"),f=h("a-button"),$=h("a-table"),I=h("a-pagination"),m=h("a-card");return l(),V(m,{style:{width:"100%"}},{default:c(()=>[y("div",H,[y("div",Q,[i(v,null,{default:c(()=>[i(q,null,{default:c(()=>[w(" Danh sách các hóa đơn nhập hàng")]),_:1})]),_:1})]),y("div",W,[i(f,{type:"primary",title:"Thêm mới"},{default:c(()=>[i(r,{to:{name:"importExport/add-new",params:{id:o.storeId}}},{default:c(()=>[Y]),_:1},8,["to"])]),_:1})])]),y("div",Z,[y("div",ee,[i($,{dataSource:o.users,columns:o.columns,scroll:{x:576},pagination:!1},{bodyCell:c(({column:s,index:_,record:n})=>[s.key==="index"?(l(),u("span",te,p(_+1),1)):d("",!0),s.key==="userName"?(l(),u("span",ae,p(n.storeName),1)):d("",!0),s.key==="imageSp"?(l(),u("span",se,p(n.quantity),1)):d("",!0),s.key==="fullName"?(l(),u("span",ne,p(n.productName),1)):d("",!0),s.key==="date"?(l(),u("span",oe,p(o.formatDate(n.createdAt)),1)):d("",!0),s.key==="email"?(l(),u("span",re,p(n.price),1)):d("",!0),s.key==="alltotal"?(l(),u("span",le,p(n.priceTotal),1)):d("",!0),s.key==="status"?(l(),u("span",ce,p(o.getStatus(n)),1)):d("",!0),s.key==="action"&&o.authStoreClaim!==null&&o.getStatus(n)!=="Đã xóa"?(l(),u(M,{key:8},[i(r,{to:{name:"admin-chi-tiet-san-pham",params:{id:n.productId}}},{default:c(()=>[i(f,{title:"Khóa",type:"dashed",size:"small",shape:"",class:"me-2 text-warning"},{default:c(()=>[w("xem ")]),_:1})]),_:2},1032,["to"]),i(r,{to:{name:"hoa-don/sua",params:{id:n.importDetailId},query:{productName:n.productName,quantity:n.quantity,price:n.price}}},{default:c(()=>[i(f,{title:"Khóa",type:"dashed",size:"small",shape:"",class:"me-2 text-warning"},{default:c(()=>[w("sửa ")]),_:1})]),_:2},1032,["to"])],64)):d("",!0)]),_:1},8,["dataSource","columns"]),y("div",ie,[i(I,{onChange:o.onChange,current:o.pageParam.current,"onUpdate:current":N[0]||(N[0]=s=>o.pageParam.current=s),total:o.pageParam.totalRecord,pageSize:o.pageParam.pageSize,"show-total":(s,_)=>`${_[0]}-${_[1]} of ${s} items`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])])])]),_:1})}const ge=L(X,[["render",ue]]);export{ge as default};
