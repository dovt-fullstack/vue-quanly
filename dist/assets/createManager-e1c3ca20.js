import{d as D,$ as T,a as _,q as V,U as E,r as R,t as G,a0 as j,x as u,y as b,W as I,F as o,Q,V as z,C as i,b as t,I as g,z as y,E as C,M as S,a2 as H}from"./index-cdcf547c.js";import{u as K}from"./use-menu-b48628b9.js";import{A as w,B as J}from"./BaseCommon-4bb1467d.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const Y=D({components:{DeleteOutlined:T},setup(){K().onSelectedKeys(["admin-users"]);const a=_(V().user.roleClaimDetail),l="http://localhost:9000",P=E(),d=R({optionsLevelManage:[],optionsRole:[],optionsStatus:[]}),O=_({}),v=_(),s=R({userName:"",fullName:"",email:"",passWord:"",rePassWord:"",levelManage:"",roleID:"",status:"",urlAvatar:"",fileAvatar:null,rmavatar:"yes",change_password:!1}),c=_(null),m={userName:[{required:!0,message:"Tài khoản không để trống.",trigger:"change"}],fullName:[{required:!0,message:"Họ tên không để trống.",trigger:"change"}],email:[{required:!0,message:"email không để trống.",trigger:"change"}],passWord:[{required:!0,validator:async(e,r)=>r===""?Promise.reject("Please input the password"):(s.rePassWord!==""&&v.value.validateFields("rePassWord"),Promise.resolve()),trigger:"change"}],rePassWord:[{validator:async(e,r)=>r===""?Promise.reject("Please input the password again"):r!==s.passWord?Promise.reject("Two inputs don't match!"):Promise.resolve(),trigger:"change"}]},p={labelCol:{span:4},wrapperCol:{span:14}},h=()=>{v.value.resetFields()},N=()=>{history.length>1?history.go(-1):this.$router.push("/")},n=()=>{w.GetOptionsLevelManage().then(e=>{d.optionsLevelManage=e.data,s.levelManage=e.data[0].value}).catch(e=>{console.log(e)})},U=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,M=()=>{w.GetOptionsRole().then(e=>{d.optionsRole=e.data,s.roleID=e.data[0].value}).catch(e=>{console.log(e)})},q=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,W=()=>{w.GetOptionsStatus().then(e=>{d.optionsStatus=e.data,s.status=e.data[0].value}).catch(e=>{console.log(e)})},A=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,B=()=>{const e={firstname:s.userName,lastname:s.fullName,email:s.email,password:s.passWord};console.log("formState"),console.log(s,"formState"),Q.post(`${l}/api/v1/auth/register/manager`,e).then(r=>{z.success("Tạo mới thành công!"),P.push({name:"admin-users"})}).catch(r=>{console.log(r)})};G(()=>{h(),n(),W(),M()});const F=e=>{var r=J.GetBase64(e.target.files[0]);r.then(k=>{s.urlAvatar=k,s.rmavatar="no"}).catch(k=>{console.log(k)})},$=()=>{s.urlAvatar=null,s.rmavatar="yes"};return{...j(d),authStoreClaim:a,errors:O,formState:s,fileAvatar:c,formRef:v,rules:m,layout:p,resetForm:h,getOptionsLevelManage:n,getOptionsStatus:W,getOptionsRole:M,filterOptionLevelManage:U,filterOptionRole:q,filterOptionStatus:A,users:d,createUsers:B,handleChangeUpload:F,handleRemoveAvatar:$,goBack:N}}}),Z={class:"row mb-3"},x={class:"col-12"},ee=i("h1",null,null,-1),ae={class:"col-12 col-sm-12 mb-3"},te={class:"row"},se={class:"col-12 col-sm-9"},oe={key:0,class:"text-danger"},re={key:0,class:"text-danger"},le={key:0,class:"text-danger"},ne=i("span",null,"Quay lại",-1);function ue(a,l,P,d,O,v){const s=u("router-link"),c=u("a-breadcrumb-item"),L=u("a-breadcrumb"),f=u("a-input"),m=u("a-form-item"),p=u("a-button"),h=u("a-form"),N=u("a-card");return b(),I(N,{style:{width:"100%"}},{default:o(()=>[i("div",Z,[i("div",x,[t(L,null,{default:o(()=>[t(c,null,{default:o(()=>[t(s,{to:{name:"admin-dashboards"}},{default:o(()=>[g("Trang chủ")]),_:1})]),_:1}),t(c,null,{default:o(()=>[t(s,{to:{name:"admin-users"}},{default:o(()=>[g("Tài khoản")]),_:1})]),_:1}),t(c,null,{default:o(()=>[g("Thêm mới manager")]),_:1})]),_:1}),ee]),i("div",ae,[t(h,H({class:"p-3",name:"custom-validation",ref:"formRef",model:a.formState,rules:a.rules},a.layout,{onFinish:l[4]||(l[4]=n=>a.createUsers())}),{default:o(()=>[i("div",te,[i("div",se,[t(m,{ref:"userName",label:"firstname",required:"",name:"userName"},{default:o(()=>[t(f,{value:a.formState.userName,"onUpdate:value":l[0]||(l[0]=n=>a.formState.userName=n)},null,8,["value"]),a.errors&&a.errors.UserName?(b(),y("small",oe,C(a.errors.UserName[0]),1)):S("",!0)]),_:1},512),t(m,{ref:"fullName",label:"lastname",required:"",name:"fullName"},{default:o(()=>[t(f,{value:a.formState.fullName,"onUpdate:value":l[1]||(l[1]=n=>a.formState.fullName=n)},null,8,["value"]),a.errors&&a.errors.FullName?(b(),y("small",re,C(a.errors.FullName[0]),1)):S("",!0)]),_:1},512),t(m,{ref:"email",label:"Email",rules:[{type:"email"}],required:"",name:"email"},{default:o(()=>[t(f,{value:a.formState.email,"onUpdate:value":l[2]||(l[2]=n=>a.formState.email=n)},null,8,["value"]),a.errors&&a.errors.Email?(b(),y("small",le,C(a.errors.Email[0]),1)):S("",!0)]),_:1},512),t(m,{"has-feedback":"",label:"Mật khẩu",required:"",name:"passWord"},{default:o(()=>[t(f,{value:a.formState.passWord,"onUpdate:value":l[3]||(l[3]=n=>a.formState.passWord=n),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),t(m,{"wrapper-col":{span:14,offset:4}},{default:o(()=>[t(p,{onClick:a.goBack,class:"me-0 me-sm-2 mb-3 mb-sm-0"},{default:o(()=>[ne]),_:1},8,["onClick"]),t(p,{class:"me-0 me-sm-2 mb-3 mb-sm-0 bg-info text-light",onClick:a.resetForm},{default:o(()=>[g("Reset")]),_:1},8,["onClick"]),t(p,{type:"primary","html-type":"submit",class:"bg-success"},{default:o(()=>[g("Lưu")]),_:1})]),_:1})])])]),_:1},16,["model","rules"])])])]),_:1})}const fe=X(Y,[["render",ue]]);export{fe as default};
