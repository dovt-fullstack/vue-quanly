import{d as D,H as I,r as f,u as A,v as L,x as $,a as M,o as V,J as z,b as l,e as m,z as w,w as o,q as F,y as E,g as p,h as t,j as d,f as y,t as h,l as v,K,F as P,M as G}from"./index-64ce397b.js";import{u as H}from"./use-menu-6afec9f3.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const j=D({components:{DeleteOutlined:I},setup(){H().onSelectedKeys(["admin-users"]);const e=f(A().user.roleClaimDetail),s=JSON.parse(localStorage.getItem("token")),g="http://localhost:9000",C=L(),N=$({optionsLevelManage:[],optionsRole:[],optionsStatus:[]}),k=f({}),i=f(),u=M().params.id,a=$({productTypeId:"",userName:"",fullName:"",email:"",passWord:"",quantity:"",priceOut:"",roleID:"",status:"",productTypeName:"",fileAvatar:null,rmavatar:"yes",change_password:!1}),_=f([]),b=f(null),c={},S={labelCol:{span:4},wrapperCol:{span:14}},T=()=>{history.length>1?history.go(-1):this.$router.push("/")},r=()=>{i.value.resetFields()},U=n=>{console.log("Selected productTypeName:",n),console.log("formState.productTypeName:",this.formState.productTypeName)},B=async()=>{try{const n=await F.get(`${g}/api/v1/management/${u}/producttype/view`,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});n.data.status==="OK"?(console.log(n.data),_.value=n.data.data):console.error(n.data.message)}catch(n){console.error(n)}},R=()=>{a.userName,a.fullName,a.quantity,a.priceOut,a.productTypename;const n=new FormData;n.append("productname",a.userName),n.append("priceIn",a.fullName),n.append("quantity",a.quantity),n.append("priceOut",a.priceOut),n.append("producttypename",a.productTypeName),F.post(`${g}/api/v1/management/${u}/import/insert`,n,{headers:{Authorization:`Bearer ${s}`}}).then(O=>{E.success("Tạo mới thành công!"),C.push({name:"importExport",params:{id:u}})}).catch(O=>{console.log(O)})};return V(()=>{B()}),{...z(N),authStoreClaim:e,errors:k,formState:a,fileAvatar:b,productTypes:_,formRef:i,rules:c,layout:S,resetForm:r,users:N,createUsers:R,handleChange:U,goBack:T}}}),Q={class:"row mb-3"},W={class:"col-12"},X=p("h1",null,null,-1),Y={class:""},Z={class:""},x={class:""},ee={key:0,class:"text-danger"},te={key:0,class:"text-danger"},ae={key:0,class:"text-danger"},oe={key:0,class:"text-danger"},re=p("span",null,"Quay lại",-1);function se(e,s,g,C,N,k){const i=l("a-breadcrumb-item"),q=l("a-breadcrumb"),u=l("a-input"),a=l("a-form-item"),_=l("a-select-option"),b=l("a-select"),c=l("a-button"),S=l("a-form"),T=l("a-card");return m(),w(T,{style:{width:"100%"}},{default:o(()=>[p("div",Q,[p("div",W,[t(q,null,{default:o(()=>[t(i,null,{default:o(()=>[d(" Trang chủ ")]),_:1}),t(i,null,{default:o(()=>[d(" Hóa đơn ")]),_:1}),t(i,null,{default:o(()=>[d("Thêm mới")]),_:1})]),_:1}),X]),p("div",Y,[t(S,G({class:"p-3",name:"custom-validation",ref:"formRef",model:e.formState,rules:e.rules},e.layout,{onFinish:s[5]||(s[5]=r=>e.createUsers())}),{default:o(()=>[p("div",Z,[p("div",x,[t(a,{ref:"userName",label:"Tên sản phẩm",required:"",name:"userName"},{default:o(()=>[t(u,{value:e.formState.userName,"onUpdate:value":s[0]||(s[0]=r=>e.formState.userName=r)},null,8,["value"]),e.errors&&e.errors.UserName?(m(),y("small",ee,h(e.errors.UserName[0]),1)):v("",!0)]),_:1},512),t(a,{ref:"fullName",label:"Giá nhập",required:"",name:"fullName"},{default:o(()=>[t(u,{value:e.formState.fullName,"onUpdate:value":s[1]||(s[1]=r=>e.formState.fullName=r)},null,8,["value"]),e.errors&&e.errors.FullName?(m(),y("small",te,h(e.errors.FullName[0]),1)):v("",!0)]),_:1},512),t(a,{ref:"quantity",label:"Số lượng nhập",required:"",name:"quantity"},{default:o(()=>[t(u,{value:e.formState.quantity,"onUpdate:value":s[2]||(s[2]=r=>e.formState.quantity=r)},null,8,["value"]),e.errors&&e.errors.quantity?(m(),y("small",ae,h(e.errors.quantity[0]),1)):v("",!0)]),_:1},512),t(a,{ref:"priceOut",label:"Giá bán",required:"",name:"priceOut"},{default:o(()=>[t(u,{value:e.formState.priceOut,"onUpdate:value":s[3]||(s[3]=r=>e.formState.priceOut=r)},null,8,["value"]),e.errors&&e.errors.priceOut?(m(),y("small",oe,h(e.errors.priceOut[0]),1)):v("",!0)]),_:1},512),t(a,{ref:"productTypeName",label:"Loại sản phẩm",name:"productTypeId"},{default:o(()=>[t(b,{value:e.formState.productTypeName,"onUpdate:value":s[4]||(s[4]=r=>e.formState.productTypeName=r),style:{width:"100%"},placeholder:"Chọn loại sản phẩm",onChange:e.handleChange},{default:o(()=>[(m(!0),y(P,null,K(e.productTypes,r=>(m(),w(_,{key:r.productTypeName,value:r.productTypeName},{default:o(()=>[d(h(r.productTypeName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1},512),t(a,{"wrapper-col":{span:14,offset:4}},{default:o(()=>[t(c,{onClick:e.goBack,class:"me-0 me-sm-2 mb-3 mb-sm-0"},{default:o(()=>[re]),_:1},8,["onClick"]),t(c,{class:"me-0 me-sm-2 mb-3 mb-sm-0 bg-info text-light",onClick:e.resetForm},{default:o(()=>[d("Reset")]),_:1},8,["onClick"]),t(c,{type:"primary","html-type":"submit",class:"bg-success"},{default:o(()=>[d("Lưu")]),_:1})]),_:1})])])]),_:1},16,["model","rules"])])])]),_:1})}const me=J(j,[["render",se]]);export{me as default};
