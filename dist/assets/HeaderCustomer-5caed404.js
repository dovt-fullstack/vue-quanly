import{d as x,B as L,D as N,L as v,A as D,r as C,o as z,c as A,b as n,e as w,f as y,g as t,h as s,w as a,z as V,l as J,i as H,t as k,n as M,j as S,p as T,k as E}from"./index-64ce397b.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import{B as O}from"./index-6420f202.js";const Z=x({components:{"a-button":L,"a-badge":O,"a-drawer":N,"a-list":v,"a-list-item":v.Item,"a-list-item-meta":v.Item.Meta,"a-avatar":D},setup(){const o="http://localhost:9000",r=JSON.parse(localStorage.getItem("auth")),p=JSON.parse(localStorage.getItem("token")),b=()=>{localStorage.removeItem("auth"),localStorage.removeItem("access_token"),localStorage.removeItem("token"),window.location.href="http://localhost:5173/login"},d=C([]),_=C(!1),c=()=>{_.value=!0,h()},f=()=>{_.value=!1,d.value.forEach(e=>{e.notiStatus=!0}),axios.get(`${o}/api/v1/notifications/seen`,{headers:{Authorization:`Bearer ${p}`}}).then(e=>{console.log(e.data.data,"noti")}).catch(e=>{console.error(e)})},h=()=>{axios.get(`${o}/api/v1/notifications/view`,{headers:{Authorization:`Bearer ${p}`}}).then(e=>{d.value=e.data.data,console.log(e.data.data,"noti")}).catch(e=>{console.error(e)})},m=e=>{console.log(`Deleting notification with id ${e}`),axios.get(`${o}/api/v1/notifications/delete/${e}`,{headers:{Authorization:`Bearer ${p}`}}).then(u=>{d.value=u.data.data,console.log(u.data.data,"noti"),h()}).catch(u=>{console.error(u)}),_.value=!1};z(()=>{h()});const g=A(()=>d.value.filter(e=>!e.notiStatus).length);return{handleClickLogout:b,userLocal:r,userLocal:r,showDrawer:c,onClose:f,open:_,notiLists:d,unreadCount:g,deleteNoti:m}}}),i=o=>(T("data-v-005a78ae"),o=o(),E(),o),j={id:"header"},P={class:"head1"},X={class:"wrap flexJus"},F=i(()=>t("span",{title:"Siêu thị Agogo"},[t("img",{width:"60",height:"60",src:"https://res.cloudinary.com/dqvr7kat6/image/upload/v1718287579/ftld80xpfribbbfhp1qu.png",alt:"Siêu thị đèn LED"})],-1)),G={class:"d-flex"},K={class:"open"},Q={style:{cursor:"pointer"},class:"oh"},R=i(()=>t("span",null," Đăng nhập ",-1)),U={class:"me-1"},W=i(()=>t("i",{class:"fa-solid"},null,-1)),Y=i(()=>t("span",null,"Trang cá nhân",-1)),tt={class:""},ot={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","font-size":"24",style:{color:"rgb(0, 136, 255)"}},et=i(()=>t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 10.5c0-3.07-1.14-5.64-4-6.32V2h-4v2.18c-2.87.68-4 3.24-4 6.32V16l-2 1v2h16v-2l-2-1v-5.5Zm-5.6 11.46A2.014 2.014 0 0 1 9.99 20h4c0 .28-.05.54-.15.78-.26.6-.79 1.04-1.44 1.18Z",fill:"currentColor"},null,-1)),at=[et],st={class:"head2"},nt={class:"wrap flexJus"},lt=i(()=>t("div",null,[t("span",{style:{font:"bold 15px arial"}},"Hãy cùng mua sắm nào!")],-1)),it={class:"flexJus"},ct=i(()=>t("div",{class:"vcart2"},[t("i",{class:"fa-solid fa-store"})],-1)),rt=i(()=>t("div",{class:"vcart2"},[t("i",{class:"fa-solid fa-cart-shopping"})],-1)),dt=i(()=>t("div",{class:"vcart2"},[t("i",{class:"fa-regular fa-rectangle-list"})],-1));function ut(o,r,p,b,d,_){const c=n("router-link"),f=n("a-menu-item"),h=n("a-menu"),m=n("a-dropdown"),g=n("a-badge"),e=n("a-button"),u=n("a-list-item-meta"),$=n("a-list-item"),B=n("a-list"),I=n("a-drawer");return w(),y("div",j,[t("div",P,[t("div",X,[s(c,{to:"/trang-chu-stores"},{default:a(()=>[F]),_:1}),t("div",G,[t("div",K,[t("label",Q,[o.userLocal?J("",!0):(w(),V(c,{key:0,to:"/login"},{default:a(()=>[R]),_:1})),s(m,null,{overlay:a(()=>[s(h,null,{default:a(()=>[s(f,null,{default:a(()=>[s(c,{to:{name:"profile-client"}},{default:a(()=>[Y]),_:1})]),_:1}),s(f,null,{default:a(()=>[t("a",{onClick:r[1]||(r[1]=(...l)=>o.handleClickLogout&&o.handleClickLogout(...l)),style:{color:"red"}},"Đăng xuất")]),_:1})]),_:1})]),default:a(()=>{var l;return[t("span",{class:"ant-dropdown-link",onClick:r[0]||(r[0]=H(()=>{},["prevent"]))},[t("span",U,"Xin chào "+k((l=o.userLocal)==null?void 0:l.lastname),1),W])]}),_:1})])]),t("div",tt,[t("div",null,[t("div",null,[s(e,{style:{"background-color":"#182537","border-color":"#182537"},type:"primary",onClick:o.showDrawer},{default:a(()=>[(w(),y("svg",ot,at)),s(g,{count:o.unreadCount,offset:"[10, 0]"},null,8,["count"])]),_:1},8,["onClick"])]),s(I,{title:"Thông báo của bạn",placement:"right",closable:!1,visible:o.open,"get-container":!1,style:{position:"absolute",height:"900px"},onClose:o.onClose},{default:a(()=>[s(B,{"item-layout":"horizontal","data-source":o.notiLists},{renderItem:a(({item:l})=>[s($,{style:M({marginTop:"10px",backgroundColor:l.notiStatus?"#ffffff":"#d3d3d3"})},{default:a(()=>[s(u,null,{title:a(()=>[t("h6",null,k(l.description),1)]),description:a(()=>[S(k(l.description),1)]),_:2},1024),s(e,{type:"link",onClick:_t=>o.deleteNoti(l.notiId),style:{color:"red"}},{default:a(()=>[S("Delete")]),_:2},1032,["onClick"])]),_:2},1032,["style"])]),_:1},8,["data-source"])]),_:1},8,["visible","onClose"])])])])])]),t("div",st,[t("div",nt,[lt,t("div",it,[s(c,{to:"/frivStore"},{default:a(()=>[ct]),_:1}),s(c,{to:"/trang-chu/gio-hang"},{default:a(()=>[rt]),_:1}),s(c,{to:"/ordered"},{default:a(()=>[dt]),_:1})])])])])}const mt=q(Z,[["render",ut],["__scopeId","data-v-005a78ae"]]);export{mt as H};
