import{d as j,$ as H,a as d,q as W,U as Y,r as M,s as X,t as Z,a0 as x,x as c,y as C,W as ee,F as s,V as S,Q as P,C as l,b as n,I as g,z as $,E as te,M as N,a2 as ae,J as oe,K as se}from"./index-cdcf547c.js";import{u as ne}from"./use-menu-b48628b9.js";import{A as k,B as re}from"./BaseCommon-4bb1467d.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";const ce=j({components:{DeleteOutlined:H},setup(){ne().onSelectedKeys(["admin-users"]);const t=d(W().user.roleClaimDetail),r="http://localhost:9000",L=Y(),O=JSON.parse(localStorage.getItem("token")),u=M({optionsLevelManage:[],optionsRole:[],optionsStatus:[]}),F=d({}),p=d(),h=X().params.id,o=M({producttypeName:"",loading:!1,avatarFile:null,avatarProduct:"",productType:""}),m=d(null),f={producttypeName:[{required:!0,message:"name không để trống.",trigger:"change"}],fullName:[{required:!1,message:" không để trống.",trigger:"change"}]},y={labelCol:{span:4},wrapperCol:{span:14}},b=()=>{history.length>1?history.go(-1):this.$router.push("/")},i=()=>{p.value.resetFields()},R=()=>{k.GetOptionsLevelManage().then(e=>{u.optionsLevelManage=e.data,o.levelManage=e.data[0].value}).catch(e=>{console.log(e)})},D=(e,a)=>a.label.toLowerCase().indexOf(e.toLowerCase())>=0,T=()=>{k.GetOptionsRole().then(e=>{u.optionsRole=e.data,o.roleID=e.data[0].value}).catch(e=>{console.log(e)})},U=(e,a)=>a.label.toLowerCase().indexOf(e.toLowerCase())>=0,G=e=>{const a=e.target.files[0];if(!a)return;if(!(a.type==="image/jpeg"||a.type==="image/png")){S.error("You can only upload JPG/PNG file!");return}if(!(a.size/1024/1024<2)){S.error("Image must smaller than 2MB!");return}const w=new FileReader;w.onloadend=()=>{I.value=w.result,q.value=a},w.readAsDataURL(a)},B=()=>{k.GetOptionsStatus().then(e=>{u.optionsStatus=e.data,o.status=e.data[0].value}).catch(e=>{console.log(e)})},V=(e,a)=>a.label.toLowerCase().indexOf(e.toLowerCase())>=0,J=e=>{const a=e.target.files[0];o.avatarFile=a},q=d(null),I=d(""),z=async()=>{try{const e=await P.get(`${r}/api/v1/management/${storeId}/producttype/view`);console.log(e.data.data,"response");const a=e.data.data}catch(e){console.error(e)}},E=()=>{const e=new FormData;o.loading=!0,e.append("name",o.producttypeName),e.append("avatar",o.avatarFile),P.post(`${r}/api/v1/management/${h}/producttype/insert`,e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${O}`}}).then(a=>{S.success("Tạo mới thành công!"),L.push({name:"ProductByStore",params:{id:h}})}).catch(a=>{console.log(a)})};Z(()=>{z(),i(),R(),B(),T()});const K=e=>{var a=re.GetBase64(e.target.files[0]);console.log(e.target.files[0],"e.target.files[0]"),a.then(v=>{o.urlAvatar=v,o.rmavatar="no"}).catch(v=>{console.log(v)})},Q=()=>{o.urlAvatar=null,o.rmavatar="yes"};return{...x(u),authStoreClaim:t,errors:F,formState:o,fileAvatar:m,formRef:p,rules:f,newImage:I,layout:y,resetForm:i,previewFiles:G,handleFileUpload:J,getOptionsLevelManage:R,getOptionsStatus:B,getOptionsRole:T,filterOptionLevelManage:D,filterOptionRole:U,filterOptionStatus:V,users:u,createUsers:E,handleChangeUpload:K,handleRemoveAvatar:Q,goBack:b}}}),A=t=>(oe("data-v-f921df58"),t=t(),se(),t),ie={class:"row mb-3"},ue={class:"col-12"},de=A(()=>l("h1",null,null,-1)),pe={class:"col-12 col-sm-12 mb-3"},me={class:"row"},fe={class:"col-12 col-sm-9"},ge={key:0,class:"text-danger"},_e={class:"avatar-container"},he=["src"],ve=A(()=>l("span",null,"Quay lại",-1));function ye(t,r,L,O,u,F){const p=c("router-link"),_=c("a-breadcrumb-item"),h=c("a-breadcrumb"),o=c("a-input"),m=c("a-form-item"),f=c("a-button"),y=c("a-form"),b=c("a-card");return C(),ee(b,{style:{width:"100%"}},{default:s(()=>[l("div",ie,[l("div",ue,[n(h,null,{default:s(()=>[n(_,null,{default:s(()=>[n(p,{to:{name:"admin-dashboards"}},{default:s(()=>[g("Trang chủ")]),_:1})]),_:1}),n(_,null,{default:s(()=>[n(p,{to:{name:"admin-users"}},{default:s(()=>[g("Product type")]),_:1})]),_:1}),n(_,null,{default:s(()=>[g("Thêm mới")]),_:1})]),_:1}),de]),l("div",pe,[n(y,ae({class:"p-3",name:"custom-validation",ref:"formRef",model:t.formState,rules:t.rules},t.layout,{onFinish:r[2]||(r[2]=i=>t.createUsers())}),{default:s(()=>[l("div",me,[l("div",fe,[n(m,{ref:"productType",label:"Loại sản phẩm",required:"",name:"productType"},{default:s(()=>[n(o,{value:t.formState.productType,"onUpdate:value":r[0]||(r[0]=i=>t.formState.productType=i)},null,8,["value"]),t.errors&&t.errors.productType?(C(),$("small",ge,te(t.errors.productType[0]),1)):N("",!0)]),_:1},512),n(m,{label:"Hình ảnh"},{default:s(()=>[l("input",{type:"file",onChange:r[1]||(r[1]=(...i)=>t.previewFiles&&t.previewFiles(...i))},null,32),l("div",_e,[t.newImage?(C(),$("img",{key:0,src:t.newImage,class:"avatar",alt:"avatar"},null,8,he)):N("",!0)])]),_:1}),n(m,{"wrapper-col":{span:14,offset:4}},{default:s(()=>[n(f,{onClick:t.goBack,class:"me-0 me-sm-2 mb-3 mb-sm-0"},{default:s(()=>[ve]),_:1},8,["onClick"]),n(f,{class:"me-0 me-sm-2 mb-3 mb-sm-0 bg-info text-light",onClick:t.resetForm},{default:s(()=>[g("Reset")]),_:1},8,["onClick"]),n(f,{type:"primary","html-type":"submit",class:"bg-success",loading:t.formState.loading},{default:s(()=>[g("Lưu")]),_:1},8,["loading"])]),_:1})])])]),_:1},16,["model","rules"])])])]),_:1})}const Le=le(ce,[["render",ye],["__scopeId","data-v-f921df58"]]);export{Le as default};
