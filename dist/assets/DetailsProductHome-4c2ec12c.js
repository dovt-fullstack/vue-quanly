import{d as M,r as u,a as A,v as V,x as U,U as z,o as F,b as S,e as N,f as w,h as q,g as t,t as o,N as J,P as E,w as R,j as d,y as T,m as K,p as Q,k as j}from"./index-64ce397b.js";import"./use-menu-6afec9f3.js";import{H as W}from"./HeaderCustomer-5caed404.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-6420f202.js";const Y=M({components:{Header:W},setup(){const e=u("Xác nhận đặt hàng");u(null);const s=u(1),r=u({});u(0);const m="http://localhost:9000",g=A(),v=g.params.id,b=g.query.storePhone,y=V(),p=JSON.parse(localStorage.getItem("auth")),l=JSON.parse(localStorage.getItem("token")),_=u(null),f=u(!1),D=u(!1),i=U({productId:null,quantityBuy:null,quantityStoke:null,customerName:null,phoneNumber:null,address:null,productName:null,price:null,discount:null,open:!1,typee:null,shippingFee:3e4,paymentMethod:"Thanh toán khi nhận hàng"}),H=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a),I=async()=>{try{const a=await axios.get(`${m}/api/v1/product/info/${v}`,{headers:{Authorization:`Bearer ${l}`}});a.data.status==="OK"?r.value=a.data.data:console.error(a.data.message)}catch(a){console.error(a)}},B=()=>{history.length>1?history.go(-1):this.$router.push("/")},$=()=>{const a=Number(s.value);a<1?alert("Số lượng tối thiểu là 1"):a>r.value.quantity?alert(`Số lượng không được vượt quá ${r.value.quantity}`):P(a)},O=()=>{const a=s.value,c=r.quantity;a<1?alert("Số lượng tối thiểu là 1"):a>c?alert(`Số lượng không được vượt quá ${c}`):(i.productId=v,i.quantityBuy=s.value,i.quantityStoke=r.value.quantity,i.customerName=`${p.firstname} ${p.lastname}`,i.phoneNumber=_.value.phoneNumber,i.address=_.value.address,i.productName=r.value.productName,i.price=r.value.price,i.discount=r.value.discount,i.open=!0,i.typee="mua-truc-tiep",f.value=!0)};z(s,a=>{i.quantity=a});const G=()=>{D.value=!0,e.value="Đang xử lí đơn hàng của bạn",setTimeout(()=>{f.value=!1,D.value=!1},2e3),k()},k=async()=>{const a=i.productId,c=i.quantityBuy,h=new FormData;h.append("productid",a),h.append("quantity",c),axios.post(`${m}/api/v1/customer/order/insert`,h,{headers:{Authorization:`Bearer ${l}`}}).then(C=>{T.success("Đặt hàng thành công, hãy xem trạng thái đơn hàng của bạn")}).catch(C=>{console.log(C)})},L=async()=>{try{const a=JSON.parse(localStorage.getItem("token")),c=await axios.get(`${m}/api/v1/account/profile/view`,{headers:{Authorization:`Bearer ${a}`}});_.value=c.data.data}catch(a){console.error(a)}},P=async a=>{const c=new FormData;c.append("productid",v),c.append("quantity",a),axios.post(`${m}/api/v1/customer/cartitem/insert`,c,{headers:{Authorization:`Bearer ${l}`}}).then(h=>{T.success("Thêm vào giỏ hàng thành công")}).catch(h=>{console.log(h)})};return F(()=>{I(),L()}),{updatePurchaseData:O,formatCurrency:H,titlee:e,open:f,handleOk:G,purchaseData:i,numberItem:s,purchaseData:i,product:r,router:y,route:g,userLocal:p,handelAddCart:$,handelByNow:k,phone:b,goBack:B}}}),n=e=>(Q("data-v-a0eba04e"),e=e(),j(),e),Z={id:"wrapper"},x={id:"main"},tt={class:"wrap"},et={id:"seo",class:"f flexJus"},at={class:"beadcrum",itemscope:"",itemtype:"https://schema.org/BreadcrumbList"},ot={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},nt={itemprop:"name"},st=n(()=>t("meta",{itemprop:"position",content:"1"},null,-1)),it={itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"},lt={itemprop:"item"},dt={itemprop:"name"},rt=n(()=>t("meta",{itemprop:"position",content:"2"},null,-1)),ct={class:"f",itemscope:"",itemtype:"http://schema.org/Product"},ut={class:"wrap flexCol"},pt={class:"f bgwhite p15"},ht={id:"pLeft",class:"rl"},mt={class:"f box-zoom flexCen"},gt={id:"anhdd",class:"f larimg"},vt=["src"],bt={class:"w50 fr flexC",style:{padding:"0 5%"}},yt={itemprop:"name",class:"pname"},_t={class:"priced"},ft={key:0},Nt={key:1},wt={class:"f gtb"},Dt={class:"edit-number"},kt=n(()=>t("p",null,"Số lượng:",-1)),Ct={class:"dvdq flexC"},St=n(()=>t("label",null,"Mua ngay và thưởng thức dịch vụ độc quyền",-1)),qt={class:"ron"},Tt={class:"ron"},Ht={class:"ron"},It=n(()=>t("li",{class:"ron"},"Đổi sản phẩm lỗi trong vòng 30 ngày",-1)),Bt=n(()=>t("li",{class:"ron"},"Cam kết giá rẻ nhất",-1)),$t=n(()=>t("span",{class:"btn2 bcam btnorder"},[t("b",null,"THÊM VÀO GIỎ HÀNG"),t("i")],-1)),Ot=[$t],Gt=n(()=>t("b",null,"MUA NGAY",-1)),Lt=n(()=>t("i",null,"Mua ngay để hưởng nhiều ưu đãi",-1)),Pt=[Gt,Lt],Mt=n(()=>t("strong",null,"Khách hàng:",-1)),At=n(()=>t("strong",null,"Số điện thoại:",-1)),Vt=n(()=>t("strong",null,"Địa chỉ:",-1)),Ut=n(()=>t("strong",null,"Tên sản phẩm:",-1)),zt=n(()=>t("strong",null,"Giá tiền (cho một sản phẩm):",-1)),Ft=n(()=>t("strong",null,"Giảm giá của sản phẩm:",-1)),Jt=n(()=>t("strong",null,"Giá sau giảm:",-1)),Et=n(()=>t("strong",null,"Số lượng:",-1)),Rt=n(()=>t("strong",null,"Phí vận chuyển:",-1)),Kt=n(()=>t("strong",null,"Tổng tiền:",-1)),Qt=n(()=>t("strong",null,"Hình thức thanh toán:",-1)),jt={class:"bphone"},Wt=K('<div id="footer" data-v-a0eba04e><div class="f" style="padding:40px 0;" data-v-a0eba04e><div class="wrap flexJus" data-v-a0eba04e><div class="f flex" data-v-a0eba04e><div class="fotb" style="width:30%;padding-right:30px;" data-v-a0eba04e><img src="https://denled.com/Content/img/logo-foot.png" alt="Denled.com" width="286" height="60" data-v-a0eba04e></div><div class="fotb" style="width:50%;padding:0 40px 0 60px;" data-v-a0eba04e><label data-v-a0eba04e>SHOWROOM</label><div class="muahang f flexC" data-v-a0eba04e><div class="showrooms" data-v-a0eba04e><ul data-v-a0eba04e><li data-v-a0eba04e>Hệ thống hỗ trợ quản lí và bán hàng tạp hóa</li><li data-v-a0eba04e><span data-v-a0eba04e>Địa chỉ 1 : </span>21C Trần Duy Hưng, Cầu Giấy, HN </li><li data-v-a0eba04e><span data-v-a0eba04e>Hotline : </span><a href="tel:0933665115" data-v-a0eba04e>0933.66.5115</a></li></ul></div></div></div><div class="fotb" data-v-a0eba04e><label data-v-a0eba04e>THÔNG TIN - HƯỚNG DẪN</label><ul data-v-a0eba04e><li data-v-a0eba04e><a title="Giới Thiệu Hệ Thống" rel="nofollow" href="/" data-v-a0eba04e>Giới Thiệu Hệ Thống</a></li><li data-v-a0eba04e><a title="Giao hàng &amp; Thanh toán" rel="nofollow" href="/" data-v-a0eba04e>Giao hàng &amp; Thanh toán</a></li><li data-v-a0eba04e><a title="Hướng dẫn mua hàng Online" rel="nofollow" href="/" data-v-a0eba04e>Hướng dẫn mua hàng Online</a></li><li data-v-a0eba04e><a title="Quy chế hoạt động" rel="nofollow" href="/" data-v-a0eba04e>Quy chế hoạt động</a></li></ul></div></div></div></div><div class="f p10 cen trang copyright" data-v-a0eba04e> © 2024 bản quyền thuộc về HungNL@gmail.com <a href="https://denled.com" title="Siêu thị đèn LED" data-v-a0eba04e>denled.com</a></div><ul id="panel" data-v-a0eba04e><li data-v-a0eba04e><img src="https://denled.com/Content/img/totop.svg" alt="To top" width="45" height="45" data-v-a0eba04e></li><li style="padding-top:10px;padding-bottom:10px;" data-v-a0eba04e><img alt="Messenger" src="https://denled.com/Content/img/messenger.svg" width="45" height="45" data-v-a0eba04e></li><li data-v-a0eba04e><img alt="Phone" src="https://denled.com/Content/img/phone.svg" width="45" height="45" data-v-a0eba04e></li></ul><div class="zalo-chat-widget" data-oaid="2839194858446814357" data-welcome-message="Rất vui khi được hỗ trợ bạn!. Nếu bạn không thể chờ thì hãy gọi hoặc nhắn tin đến số điện thoại này 0973.66.5115." data-autopopup="1800" data-width="500" data-height="500" style="right:12px;" data-v-a0eba04e></div></div>',1);function Xt(e,s,r,m,g,v){var p;const b=S("Header"),y=S("a-modal");return N(),w("div",Z,[q(b),t("div",x,[t("div",tt,[t("div",et,[t("ul",at,[t("li",ot,[t("a",{itemprop:"item",onClick:s[0]||(s[0]=(...l)=>e.goBack&&e.goBack(...l))},[t("span",nt,o(e.product.storeName?e.product.storeName.toUpperCase():""),1)]),st]),t("li",it,[t("p",lt,[t("span",dt,o(e.product.productType?e.product.productType.toUpperCase():""),1)]),rt])])])]),t("div",ct,[t("div",ut,[t("div",pt,[t("div",ht,[t("div",mt,[t("div",gt,[t("img",{src:e.product.avatarProduct,itemprop:"image"},null,8,vt)])])]),t("div",bt,[t("h1",yt,o(e.product.productName),1),t("span",_t,[t("u",null,o((p=e.product.price)==null?void 0:p.toLocaleString())+"₫",1),e.product.discount&&e.product.discount!==0?(N(),w("b",ft,o((e.product.price*(100-e.product.discount)/100).toLocaleString())+"₫ ",1)):(N(),w("b",Nt,o(e.product.price)+"₫ ",1))]),t("div",wt,[t("label",null,o(e.product.view)+" Lượt xem",1)]),t("div",Dt,[kt,J(t("input",{id:"numberItem",type:"number",class:"input","onUpdate:modelValue":s[1]||(s[1]=l=>e.numberItem=l),min:1,style:{padding:"5px 8px","border-radius":"5px",width:"70x"}},null,512),[[E,e.numberItem]])]),t("div",Ct,[St,t("ul",null,[t("li",qt,"Tên cửa hàng : "+o(e.product.storeName),1),t("li",Tt,"Số lượng : "+o(e.product.quantity),1),t("li",Ht,"Mô tả sản phẩm : "+o(e.product.description),1),It,Bt])]),t("div",{onClick:s[2]||(s[2]=l=>e.handelAddCart()),class:"action"},Ot),t("span",{class:"btn2 bcam btnorder",onClick:s[3]||(s[3]=(...l)=>e.updatePurchaseData&&e.updatePurchaseData(...l))},Pt),t("template",null,[q(y,{visible:e.open,"onUpdate:visible":s[4]||(s[4]=l=>e.open=l),title:e.titlee,onOk:e.handleOk},{default:R(()=>[t("p",null,[Mt,d(" "+o(e.purchaseData.customerName),1)]),t("p",null,[At,d(" "+o(e.purchaseData.phoneNumber),1)]),t("p",null,[Vt,d(" "+o(e.purchaseData.address),1)]),t("p",null,[Ut,d(" "+o(e.purchaseData.productName),1)]),t("p",null,[zt,d(" "+o(e.formatCurrency(e.purchaseData.price)),1)]),t("p",null,[Ft,d(" "+o(e.purchaseData.discount)+"%",1)]),t("p",null,[Jt,d(" "+o(e.formatCurrency(e.purchaseData.price*(1-e.purchaseData.discount/100))),1)]),t("p",null,[Et,d(" "+o(e.purchaseData.quantityBuy),1)]),t("p",null,[Rt,d(" "+o(e.formatCurrency(e.purchaseData.shippingFee)),1)]),t("p",null,[Kt,d(" "+o(e.formatCurrency(e.purchaseData.shippingFee+e.purchaseData.price*(1-e.purchaseData.discount/100)*e.purchaseData.quantityBuy)),1)]),t("p",null,[Qt,d(" "+o(e.purchaseData.paymentMethod),1)])]),_:1},8,["visible","title","onOk"])]),t("ul",jt,[t("li",null,[d("Số điện thoại của cửa hàng "),t("b",null,o(e.phone),1)])])])])])])]),Wt])}const ae=X(Y,[["render",Xt],["__scopeId","data-v-a0eba04e"]]);export{ae as default};
