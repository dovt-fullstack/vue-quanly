import{d as T,H as $,r as _,u as V,v as j,x as W,o as E,J as G,b as u,e as b,z as H,w as o,q as I,y as z,g as i,h as t,j as g,f as w,t as y,l as S,M as J}from"./index-64ce397b.js";import{u as K}from"./use-menu-6afec9f3.js";import{A as C,B as Q}from"./BaseCommon-86b03c47.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const Y=T({components:{DeleteOutlined:$},setup(){K().onSelectedKeys(["admin-users"]);const a=_(V().user.roleClaimDetail),l="http://localhost:9000",P=j(),d=W({optionsLevelManage:[],optionsRole:[],optionsStatus:[]}),O=_({}),v=_(),s=W({userName:"",fullName:"",email:"",passWord:"",rePassWord:"",levelManage:"",roleID:"",status:"",urlAvatar:"",fileAvatar:null,rmavatar:"yes",change_password:!1}),c=_(null),m={userName:[{required:!0,message:"Tài khoản không để trống.",trigger:"change"}],fullName:[{required:!0,message:"Họ tên không để trống.",trigger:"change"}],email:[{required:!0,message:"email không để trống.",trigger:"change"}],passWord:[{required:!0,validator:async(e,r)=>r===""?Promise.reject("Please input the password"):(s.rePassWord!==""&&v.value.validateFields("rePassWord"),Promise.resolve()),trigger:"change"}],rePassWord:[{validator:async(e,r)=>r===""?Promise.reject("Please input the password again"):r!==s.passWord?Promise.reject("Two inputs don't match!"):Promise.resolve(),trigger:"change"}]},p={labelCol:{span:4},wrapperCol:{span:14}},h=()=>{v.value.resetFields()},N=()=>{history.length>1?history.go(-1):this.$router.push("/")},n=()=>{C.GetOptionsLevelManage().then(e=>{d.optionsLevelManage=e.data,s.levelManage=e.data[0].value}).catch(e=>{console.log(e)})},q=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,M=()=>{C.GetOptionsRole().then(e=>{d.optionsRole=e.data,s.roleID=e.data[0].value}).catch(e=>{console.log(e)})},A=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,R=()=>{C.GetOptionsStatus().then(e=>{d.optionsStatus=e.data,s.status=e.data[0].value}).catch(e=>{console.log(e)})},B=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,U=()=>{const e={firstname:s.userName,lastname:s.fullName,email:s.email,password:s.passWord};console.log("formState"),console.log(s,"formState"),I.post(`${l}/api/v1/auth/register/manager`,e).then(r=>{z.success("Tạo mới thành công!"),P.push({name:"admin-users"})}).catch(r=>{console.log(r)})};E(()=>{h(),n(),R(),M()});const D=e=>{var r=Q.GetBase64(e.target.files[0]);r.then(k=>{s.urlAvatar=k,s.rmavatar="no"}).catch(k=>{console.log(k)})},F=()=>{s.urlAvatar=null,s.rmavatar="yes"};return{...G(d),authStoreClaim:a,errors:O,formState:s,fileAvatar:c,formRef:v,rules:m,layout:p,resetForm:h,getOptionsLevelManage:n,getOptionsStatus:R,getOptionsRole:M,filterOptionLevelManage:q,filterOptionRole:A,filterOptionStatus:B,users:d,createUsers:U,handleChangeUpload:D,handleRemoveAvatar:F,goBack:N}}}),Z={class:"row mb-3"},x={class:"col-12"},ee=i("h1",null,null,-1),ae={class:"col-12 col-sm-12 mb-3"},te={class:"row"},se={class:"col-12 col-sm-9"},oe={key:0,class:"text-danger"},re={key:0,class:"text-danger"},le={key:0,class:"text-danger"},ne=i("span",null,"Quay lại",-1);function ue(a,l,P,d,O,v){const s=u("router-link"),c=u("a-breadcrumb-item"),L=u("a-breadcrumb"),f=u("a-input"),m=u("a-form-item"),p=u("a-button"),h=u("a-form"),N=u("a-card");return b(),H(N,{style:{width:"100%"}},{default:o(()=>[i("div",Z,[i("div",x,[t(L,null,{default:o(()=>[t(c,null,{default:o(()=>[t(s,{to:{name:"admin-dashboards"}},{default:o(()=>[g("Trang chủ")]),_:1})]),_:1}),t(c,null,{default:o(()=>[t(s,{to:{name:"admin-users"}},{default:o(()=>[g("Tài khoản")]),_:1})]),_:1}),t(c,null,{default:o(()=>[g("Thêm mới manager")]),_:1})]),_:1}),ee]),i("div",ae,[t(h,J({class:"p-3",name:"custom-validation",ref:"formRef",model:a.formState,rules:a.rules},a.layout,{onFinish:l[4]||(l[4]=n=>a.createUsers())}),{default:o(()=>[i("div",te,[i("div",se,[t(m,{ref:"userName",label:"firstname",required:"",name:"userName"},{default:o(()=>[t(f,{value:a.formState.userName,"onUpdate:value":l[0]||(l[0]=n=>a.formState.userName=n)},null,8,["value"]),a.errors&&a.errors.UserName?(b(),w("small",oe,y(a.errors.UserName[0]),1)):S("",!0)]),_:1},512),t(m,{ref:"fullName",label:"lastname",required:"",name:"fullName"},{default:o(()=>[t(f,{value:a.formState.fullName,"onUpdate:value":l[1]||(l[1]=n=>a.formState.fullName=n)},null,8,["value"]),a.errors&&a.errors.FullName?(b(),w("small",re,y(a.errors.FullName[0]),1)):S("",!0)]),_:1},512),t(m,{ref:"email",label:"Email",rules:[{type:"email"}],required:"",name:"email"},{default:o(()=>[t(f,{value:a.formState.email,"onUpdate:value":l[2]||(l[2]=n=>a.formState.email=n)},null,8,["value"]),a.errors&&a.errors.Email?(b(),w("small",le,y(a.errors.Email[0]),1)):S("",!0)]),_:1},512),t(m,{"has-feedback":"",label:"Mật khẩu",required:"",name:"passWord"},{default:o(()=>[t(f,{value:a.formState.passWord,"onUpdate:value":l[3]||(l[3]=n=>a.formState.passWord=n),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),t(m,{"wrapper-col":{span:14,offset:4}},{default:o(()=>[t(p,{onClick:a.goBack,class:"me-0 me-sm-2 mb-3 mb-sm-0"},{default:o(()=>[ne]),_:1},8,["onClick"]),t(p,{class:"me-0 me-sm-2 mb-3 mb-sm-0 bg-info text-light",onClick:a.resetForm},{default:o(()=>[g("Reset")]),_:1},8,["onClick"]),t(p,{type:"primary","html-type":"submit",class:"bg-success"},{default:o(()=>[g("Lưu")]),_:1})]),_:1})])])]),_:1},16,["model","rules"])])])]),_:1})}const fe=X(Y,[["render",ue]]);export{fe as default};
