import{d as F,s as q,D as M,B as U,I as R,r as f,u as j,v as H,a as J,x as L,o as G,b as u,e as d,f as c,h as l,w as h,F as V,q as I,y as P,g as o,j as $,i as Q,t as s,l as m}from"./index-64ce397b.js";import{u as W}from"./use-menu-6afec9f3.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const Y=F({components:{"a-form":q,"a-form-item":q.Item,"a-drawer":M,"a-button":U,"a-input-number":R},setup(){W().onSelectedKeys(["admin-users"]);const e=f(j().user.roleClaimDetail),p="http://localhost:9000",N=H(),A=J(),O=f([]),D=f([]),v=f({}),y=JSON.parse(localStorage.getItem("token")),S=f(""),n=L({currentPage:1,pageSize:10,totalItems:0,totalPages:0}),g=f(!1),w=()=>{g.value=!0},T=()=>{g.value=!1},z=async i=>{w();const{data:t}=await I.get(`${p}/api/v1/shipper/orderdetail?orderid=${i}`,{headers:{Authorization:`Bearer ${y}`}});t.status==="OK"?(v.value=t.data,console.log(v.data,"dataId.data")):console.error(t.message)},B=[{title:"#",key:"index"},{title:"Tên cửa hàng",dataIndex:"userName",key:"userName"},{title:"Tên sản phẩm",dataIndex:"fullName",key:"fullName"},{title:"Số lượng",key:"email"},{title:"Địa chỉ cửa hàng",key:"email2"},{title:"Số cửa hàng",key:"email5"},{title:"Ảnh",key:"email3"},{title:"Tổng tiền",key:"email4"},{title:"Tác vụ",key:"action",fixed:"right"}],b=(i,t,E="")=>{I.get(`${p}/api/v1/shipper/orderlist/view`,{params:{page:i,size:t,keyword:E},headers:{Authorization:`Bearer ${y}`}}).then(k=>{console.log(k.data.data,"response"),D.value=k.data.data,n.totalItems=k.data.pagination.totalItems,n.totalPages=k.data.pagination.totalPages}).catch(k=>{console.error(k)})},a=(i,t)=>{n.currentPage=i,n.pageSize=t,b(i,t,S.value)},_=i=>{N.push({name:i})},r=async i=>{try{const t=await I.get(`${p}/api/v1/shipper/changestatus1/${i}`,{headers:{Authorization:`Bearer ${y}`}});console.log(t),_("danh-sach-don-da-nhan"),P.success("Nhận đơn thành công")}catch(t){P.error(t.response.data)}},C=async i=>{try{const t=await I.get(`${p}/api/v1/shipper/changestatus2/${i}`,{headers:{Authorization:`Bearer ${y}`}});P.success("Hoàn thành đơn"),_("danh-sach-don-da-giao")}catch(t){P.error(t.response.data.message)}};return G(()=>{b(n.currentPage,n.pageSize)}),{route:A,onSearch:()=>{n.currentPage=1,b(n.currentPage,n.pageSize,S.value)},router:N,authStoreClaim:e,searchKeyword:S,errors:O,users:D,columns:B,pageParam:n,onChange:a,giveOrder:r,doneOrder:C,isDrawerVisible:g,showDrawer:w,handleClose:T,dataId:v,getIdDh:z}}}),Z={class:"row mb-3"},x={class:"col-6"},ee={class:"row"},ae={class:"row mb-3"},te={class:"col-12"},oe={class:"col-12"},se={key:0},ne={key:1},re={key:2},ie={key:3},le={key:4},de={key:5},ce=["src","alt"],ue={key:7},he={class:"col-12"},me={class:"giohang orderhome"},pe={style:{color:"black"}};function ge(e,p,N,A,O,D){const v=u("a-breadcrumb-item"),y=u("a-breadcrumb"),S=u("a-input"),n=u("a-form-item"),g=u("a-button"),w=u("a-form"),T=u("a-table"),z=u("a-pagination"),B=u("a-card"),b=u("a-drawer");return d(),c(V,null,[l(B,{style:{width:"100%"}},{default:h(()=>[o("div",Z,[o("div",x,[l(y,null,{default:h(()=>[l(v,null,{default:h(()=>[$("Danh sách đơn chưa giao")]),_:1})]),_:1})])]),o("div",ee,[o("div",ae,[o("div",te,[l(w,{onSubmit:Q(e.onSearch,["prevent"])},{default:h(()=>[l(n,null,{default:h(()=>[l(S,{placeholder:"Tìm kiếm",value:e.searchKeyword,"onUpdate:value":p[0]||(p[0]=a=>e.searchKeyword=a),onPressEnter:e.onSearch},null,8,["value","onPressEnter"])]),_:1}),l(g,{type:"primary",onClick:e.onSearch},{default:h(()=>[$("Tìm kiếm")]),_:1},8,["onClick"])]),_:1},8,["onSubmit"])])]),o("div",oe,[l(T,{dataSource:e.users,columns:e.columns,scroll:{x:576},pagination:!1},{bodyCell:h(({column:a,index:_,record:r})=>{var C;return[a.key==="index"?(d(),c("span",se,s(_+1+(e.pageParam.currentPage-1)*10),1)):m("",!0),a.key==="userName"?(d(),c("span",ne,s(r.storeName),1)):m("",!0),a.key==="fullName"?(d(),c("span",re,s(r.productName),1)):m("",!0),a.key==="email"?(d(),c("span",ie,s(r.quantity),1)):m("",!0),a.key==="email2"?(d(),c("span",le,s(r.storeAddress),1)):m("",!0),a.key==="email5"?(d(),c("span",de,s(r.storePhone),1)):m("",!0),a.key==="email3"?(d(),c("img",{key:6,style:{width:"50px !important"},src:r.productImg,alt:r.productImg},null,8,ce)):m("",!0),a.key==="email4"?(d(),c("span",ue,s((C=r.priceTotal)==null?void 0:C.toLocaleString())+" VND",1)):m("",!0),a.key==="action"&&e.authStoreClaim!==null?(d(),c(V,{key:8},[],64)):m("",!0),a.key==="action"&&e.authStoreClaim!==null?(d(),c(V,{key:9},[l(g,{onClick:K=>e.getIdDh(r.orderDetailId),type:"dashed",size:"small",title:"Sửa"},{default:h(()=>[$(" Chi tiết ")]),_:2},1032,["onClick"]),l(g,{onClick:K=>e.giveOrder(r.orderDetailId),type:"dashed",size:"small",title:"Sửa"},{default:h(()=>[$(" Nhận đơn ")]),_:2},1032,["onClick"])],64)):m("",!0)]}),_:1},8,["dataSource","columns"]),o("div",he,[l(z,{onChange:e.onChange,current:e.pageParam.currentPage,"onUpdate:current":p[1]||(p[1]=a=>e.pageParam.currentPage=a),total:e.pageParam.totalItems,pageSize:e.pageParam.pageSize,"show-total":(a,_)=>`${_[0]}-${_[1]} của ${a} đơn hàng`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])])])]),_:1}),l(b,{title:"Chi tiết",visible:e.isDrawerVisible,width:850,onClose:e.handleClose,destroyOnClose:!0},{default:h(()=>[o("div",me,[o("p",pe,"Tên khách hàng : "+s(e.dataId.customerName),1),o("p",null,"Số điện thoại : "+s(e.dataId.customerPhone),1),o("p",null,"Tổng tiền :"+s(e.dataId.priceTotal),1),o("p",null,"Tên sản phẩm :"+s(e.dataId.productName),1),o("p",null,"Số lượng :"+s(e.dataId.quantity),1),o("p",null,"Địa chỉ :"+s(e.dataId.address),1)])]),_:1},8,["visible","onClose"])],64)}const fe=X(Y,[["render",ge]]);export{fe as default};
