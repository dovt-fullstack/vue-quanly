import{d as $,H as T,r as h,u as U,v as F,x as O,o as V,J as G,b as r,e as L,z as q,w as a,q as x,y as P,g as l,h as s,j as p,f as j,t as z,l as E,M as H}from"./index-64ce397b.js";import{u as I}from"./use-menu-6afec9f3.js";import{A as y,B as J}from"./BaseCommon-86b03c47.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const Q=$({components:{DeleteOutlined:T},setup(){I().onSelectedKeys(["admin-users"]);const t=h(U().user.roleClaimDetail),c="http://localhost:9000",w=F(),m=O({optionsLevelManage:[],optionsRole:[],optionsStatus:[]}),k=h({}),g=h(),o=O({userName:""}),i=h(null),v={userName:[{required:!0,message:"Tài khoản không để trống.",trigger:"change"}]},b={labelCol:{span:4},wrapperCol:{span:14}},d=()=>{g.value.resetFields()},u=()=>{y.GetOptionsLevelManage().then(e=>{m.optionsLevelManage=e.data,o.levelManage=e.data[0].value}).catch(e=>{console.log(e)})},C=(e,n)=>n.label.toLowerCase().indexOf(e.toLowerCase())>=0,f=()=>{y.GetOptionsRole().then(e=>{m.optionsRole=e.data,o.roleID=e.data[0].value}).catch(e=>{console.log(e)})},_=(e,n)=>n.label.toLowerCase().indexOf(e.toLowerCase())>=0,R=()=>{history.length>1?history.go(-1):this.$router.push("/")},N=()=>{y.GetOptionsStatus().then(e=>{m.optionsStatus=e.data,o.status=e.data[0].value}).catch(e=>{console.log(e)})},B=(e,n)=>n.label.toLowerCase().indexOf(e.toLowerCase())>=0,M=()=>{const e=new FormData;e.append("name",o.userName),console.log("formState"),console.log(o,"formState"),x.post(`${c}/api/v1/admin/storetype/insert`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(n=>{P.success("Tạo mới thành công!"),w.push({name:"danh-sach-store"})}).catch(n=>{console.log(n)})};V(()=>{d(),u(),N(),f()});const A=e=>{var n=J.GetBase64(e.target.files[0]);n.then(S=>{o.urlAvatar=S,o.rmavatar="no"}).catch(S=>{console.log(S)})},D=()=>{o.urlAvatar=null,o.rmavatar="yes"};return{...G(m),authStoreClaim:t,errors:k,formState:o,fileAvatar:i,formRef:g,rules:v,layout:b,resetForm:d,goBack:R,getOptionsLevelManage:u,getOptionsStatus:N,getOptionsRole:f,filterOptionLevelManage:C,filterOptionRole:_,filterOptionStatus:B,users:m,createUsers:M,handleChangeUpload:A,handleRemoveAvatar:D}}}),W={class:"row mb-3"},X={class:"col-12"},Y=l("h1",null,null,-1),Z={class:"col-12 col-sm-12 mb-3"},ee={class:"row"},te={class:"col-12 col-sm-9"},oe={key:0,class:"text-danger"},ae=l("span",null,"Quay lại",-1);function se(t,c,w,m,k,g){const o=r("router-link"),i=r("a-breadcrumb-item"),v=r("a-breadcrumb"),b=r("a-input"),d=r("a-form-item"),u=r("a-button"),C=r("a-form"),f=r("a-card");return L(),q(f,{style:{width:"100%"}},{default:a(()=>[l("div",W,[l("div",X,[s(v,null,{default:a(()=>[s(i,null,{default:a(()=>[s(o,{to:{name:"admin-dashboards"}},{default:a(()=>[p("Trang chủ")]),_:1})]),_:1}),s(i,null,{default:a(()=>[s(o,{to:{name:"admin-users"}},{default:a(()=>[p("Store")]),_:1})]),_:1}),s(i,null,{default:a(()=>[p("Thêm mới")]),_:1})]),_:1}),Y]),l("div",Z,[s(C,H({class:"p-3",name:"custom-validation",ref:"formRef",model:t.formState,rules:t.rules},t.layout,{onFinish:c[1]||(c[1]=_=>t.createUsers())}),{default:a(()=>[l("div",ee,[l("div",te,[s(d,{ref:"userName",label:"tên cửa hàng",required:"",name:"userName"},{default:a(()=>[s(b,{value:t.formState.userName,"onUpdate:value":c[0]||(c[0]=_=>t.formState.userName=_)},null,8,["value"]),t.errors&&t.errors.UserName?(L(),j("small",oe,z(t.errors.UserName[0]),1)):E("",!0)]),_:1},512),s(d,{"wrapper-col":{span:14,offset:4}},{default:a(()=>[s(u,{onClick:t.goBack,class:"me-0 me-sm-2 mb-3 mb-sm-0"},{default:a(()=>[ae]),_:1},8,["onClick"]),s(u,{class:"me-0 me-sm-2 mb-3 mb-sm-0 bg-info text-light",onClick:t.resetForm},{default:a(()=>[p("Reset")]),_:1},8,["onClick"]),s(u,{type:"primary","html-type":"submit",class:"bg-success"},{default:a(()=>[p("Lưu")]),_:1})]),_:1})])])]),_:1},16,["model","rules"])])])]),_:1})}const me=K(Q,[["render",se]]);export{me as default};
