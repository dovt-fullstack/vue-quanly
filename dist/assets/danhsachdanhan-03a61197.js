import{d as U,s as q,D as H,B as R,I as j,r as y,u as J,v as L,a as G,x as Q,o as W,b as u,e as d,f as c,h as l,w as h,F as A,q as I,y as P,g as s,j as $,i as X,t as o,l as m}from"./index-64ce397b.js";import{u as Y}from"./use-menu-6afec9f3.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";const x=U({components:{"a-form":q,"a-form-item":q.Item,"a-drawer":H,"a-button":R,"a-input-number":j},setup(){Y().onSelectedKeys(["admin-users"]);const e=y(J().user.roleClaimDetail),p="http://localhost:9000",N=L(),V=G(),O=y([]),D=y([]),k=y({}),f=y(""),n=Q({currentPage:1,pageSize:10,totalItems:0,totalPages:0}),v=y(!1),g=JSON.parse(localStorage.getItem("token")),b=()=>{v.value=!0},z=()=>{v.value=!1},T=async i=>{b();const{data:t}=await I.get(`${p}/api/v1/shipper/orderdetail?orderid=${i}`,{headers:{Authorization:`Bearer ${g}`}});t.status==="OK"?(k.value=t.data,console.log(k.data,"dataId.data")):console.error(t.message)},B=[{title:"#",key:"index"},{title:"Tên cửa hàng",dataIndex:"userName",key:"userName"},{title:"Tên sản phẩm",dataIndex:"fullName",key:"fullName"},{title:"Số lượng",key:"email"},{title:"Đia chỉ cửa hàng",key:"email2"},{title:"Số cửa hàng",key:"email5"},{title:"Ảnh",key:"email3"},{title:"Tổng tiền",key:"email4"},{title:"Tác vụ",key:"action",fixed:"right"}],w=(i,t,E="")=>{I.get(`${p}/api/v1/shipper/orderlist/taken`,{params:{page:i,size:t,keyword:E},headers:{Authorization:`Bearer ${g}`}}).then(S=>{const K=S.data.data.sort((F,M)=>new Date(M.updateAt)-new Date(F.updateAt));console.log(K,"response"),D.value=K,n.totalItems=S.data.pagination.totalItems,n.totalPages=S.data.pagination.totalPages}).catch(S=>{console.error(S)})},a=(i,t)=>{n.currentPage=i,n.pageSize=t,w(i,t,f.value)},_=async i=>{try{const t=await I.get(`${p}/api/v1/shipper/changestatus1/${i}`,{headers:{Authorization:`Bearer ${g}`}});P.success("success")}catch(t){P.error(t.response.data.message)}},r=()=>{n.currentPage=1,w(n.currentPage,n.pageSize,f.value)},C=async i=>{try{const t=await I.get(`${p}/api/v1/shipper/changestatus2/${i}`,{headers:{Authorization:`Bearer ${g}`}});N.push("danh-sach-don-da-giao"),P.success("success")}catch(t){P.error(t.response.data.message)}};return W(()=>{w(n.currentPage,n.pageSize)}),{route:V,onSearch:r,searchKeyword:f,router:N,authStoreClaim:e,errors:O,users:D,columns:B,pageParam:n,onChange:a,giveOrder:_,doneOrder:C,isDrawerVisible:v,showDrawer:b,handleClose:z,dataId:k,getIdDh:T}}}),ee={class:"row mb-3"},ae={class:"col-6"},te={class:"row"},se={class:"row mb-3"},oe={class:"col-12"},ne={class:"col-12"},re={key:0},ie={key:1},le={key:2},de={key:3},ce={key:4},ue={key:5},he=["src","alt"],me={key:7},pe={class:"col-12"},ge={class:"giohang orderhome"},_e={style:{color:"black"}};function ye(e,p,N,V,O,D){const k=u("a-breadcrumb-item"),f=u("a-breadcrumb"),n=u("a-input"),v=u("a-form-item"),g=u("a-button"),b=u("a-form"),z=u("a-table"),T=u("a-pagination"),B=u("a-card"),w=u("a-drawer");return d(),c(A,null,[l(B,{style:{width:"100%"}},{default:h(()=>[s("div",ee,[s("div",ae,[l(f,null,{default:h(()=>[l(k,null,{default:h(()=>[$("Danh sách đơn đã nhận")]),_:1})]),_:1})])]),s("div",te,[s("div",se,[s("div",oe,[l(b,{onSubmit:X(e.onSearch,["prevent"])},{default:h(()=>[l(v,null,{default:h(()=>[l(n,{placeholder:"Tìm kiếm",value:e.searchKeyword,"onUpdate:value":p[0]||(p[0]=a=>e.searchKeyword=a),onPressEnter:e.onSearch},null,8,["value","onPressEnter"])]),_:1}),l(g,{type:"primary",onClick:e.onSearch},{default:h(()=>[$("Tìm kiếm")]),_:1},8,["onClick"])]),_:1},8,["onSubmit"])])]),s("div",ne,[l(z,{dataSource:e.users,columns:e.columns,scroll:{x:576},pagination:!1},{bodyCell:h(({column:a,index:_,record:r})=>{var C;return[a.key==="index"?(d(),c("span",re,o(_+1+(e.pageParam.currentPage-1)*10),1)):m("",!0),a.key==="userName"?(d(),c("span",ie,o(r.storeName),1)):m("",!0),a.key==="fullName"?(d(),c("span",le,o(r.productName),1)):m("",!0),a.key==="email"?(d(),c("span",de,o(r.quantity),1)):m("",!0),a.key==="email2"?(d(),c("span",ce,o(r.storeAddress),1)):m("",!0),a.key==="email5"?(d(),c("span",ue,o(r.storePhone),1)):m("",!0),a.key==="email3"?(d(),c("img",{key:6,style:{width:"50px !important"},src:r.productImg,alt:r.productImg},null,8,he)):m("",!0),a.key==="email4"?(d(),c("span",me,o((C=r.priceTotal)==null?void 0:C.toLocaleString())+" VND",1)):m("",!0),a.key==="action"&&e.authStoreClaim!==null?(d(),c(A,{key:8},[],64)):m("",!0),a.key==="action"&&e.authStoreClaim!==null?(d(),c(A,{key:9},[l(g,{onClick:i=>e.getIdDh(r.orderDetailId),type:"dashed",size:"small"},{default:h(()=>[$(" Chi tiết ")]),_:2},1032,["onClick"]),l(g,{title:"Hoàn thành đơn",onClick:i=>e.doneOrder(r.orderDetailId),type:"dashed",size:"small",shape:""},{default:h(()=>[$(" Hoàn thành ")]),_:2},1032,["onClick"])],64)):m("",!0)]}),_:1},8,["dataSource","columns"]),s("div",pe,[l(T,{onChange:e.onChange,current:e.pageParam.currentPage,"onUpdate:current":p[1]||(p[1]=a=>e.pageParam.currentPage=a),total:e.pageParam.totalItems,pageSize:e.pageParam.pageSize,"show-total":(a,_)=>`${_[0]}-${_[1]} của ${a} đơn hàng`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])])])]),_:1}),l(w,{title:"Chi tiết",visible:e.isDrawerVisible,width:850,onClose:e.handleClose,destroyOnClose:!0},{default:h(()=>[s("div",ge,[s("p",_e,"Tên khách hàng : "+o(e.dataId.customerName),1),s("p",null,"Số điện thoại : "+o(e.dataId.customerPhone),1),s("p",null,"Tổng tiền :"+o(e.dataId.priceTotal),1),s("p",null,"Tên sản phẩm :"+o(e.dataId.productName),1),s("p",null,"Số lượng :"+o(e.dataId.quantity),1),s("p",null,"Địa chỉ giao hàng:"+o(e.dataId.address),1)])]),_:1},8,["visible","onClose"])],64)}const we=Z(x,[["render",ye]]);export{we as default};
