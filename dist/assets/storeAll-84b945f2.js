import{d as B,a as q,q as j,U as w,s as F,r as $,Y as I,t as U,x as i,y as m,W as O,F as o,Q as T,V as p,C as c,b as r,I as x,z as g,E as f,M as h}from"./index-cdcf547c.js";import{u as A}from"./use-menu-b48628b9.js";import{A as z}from"./ApiUser-6badb945.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const V=B({setup(){A().onSelectedKeys(["admin-users"]);const n=q(j().user.roleClaimDetail),_="http://localhost:9000",P=w(),t=F(),u=q([]),k=q([]),s=$({current:Object.keys(t.query).length>0?t.query.PageNumber:1,pageNumber:Object.keys(t.query).length>0?t.query.PageNumber:1,pageSize:Object.keys(t.query).length>0?t.query.PageSize:10,totalRecord:0,userName:Object.keys(t.query).length>0?t.query.UserName:"",statusFilter:!1}),b=[{title:"#",key:"index"},{title:"Tên cửa hàng",dataIndex:"userName",key:"userName"},{title:"Sđt",dataIndex:"fullName",key:"fullName"},{title:"Loại",key:"email"},{title:"Tác vụ",key:"action",fixed:"right"}],d=JSON.parse(localStorage.getItem("token")),l=a=>{T.get(`${_}/api/v1/admin/store/view`,{headers:{Authorization:`Bearer ${d}`}}).then(e=>{console.log(e.data.data,"response"),k.value=e.data.data}).catch(e=>{console.error(e)})},N=a=>{z.DeleteById(a).then(e=>{console.log(e),e.status==200&&p.success("Xóa thành công!"),l()}).catch(e=>{p.error(e.message),e.response.data.hasOwnProperty("errors")?u.value=e.response.data.errors:u.value=e.response.data})},v=a=>{z.BannedById(a).then(e=>{e.status==200?p.success("Khóa thành công!"):p.error("Lỗi! Tác vụ thực hiện không thành công."),l()}).catch(e=>{p.error(e.message),e.response.data.hasOwnProperty("errors")?u.value=e.response.data.errors:u.value=e.response.data})};I(()=>{Object.keys(t.query).length===0&&(s.current=Object.keys(t.query).length>0?t.query.PageNumber:1,s.pageNumber=Object.keys(t.query).length>0?t.query.PageNumber:1,s.pageSize=Object.keys(t.query).length>0?t.query.PageSize:10,s.userName=Object.keys(t.query).length>0?t.query.UserName:"",s.statusFilter=!0,l())}),U(()=>{l()});function S(a,e){s.pageNumber=a,s.pageSize=e,s.statusFilter=!0,l()}return{route:t,router:P,authStoreClaim:n,errors:u,users:k,columns:b,pageParam:s,onChange:S,clickFrmFilter:a=>{s.statusFilter=!0,l()},confirmRemove:N,confirmBanned:v}}}),K={class:"row mb-3"},D={class:"col-6"},M={class:"col-6 d-flex justify-content-end"},E=c("i",{class:"fa-solid fa-vials"},null,-1),L=c("i",{class:"fa-solid fa-vial-virus"},null,-1),Y=c("i",{class:"fa-solid fa-plus"},null,-1),J={class:"row"},Q={class:"col-12"},W={key:0},X={key:1},G={key:2},H={key:3},Z={class:"col-12"};function ee(n,_,P,t,u,k){const s=i("a-breadcrumb-item"),b=i("a-breadcrumb"),d=i("a-button"),l=i("router-link"),N=i("a-popconfirm"),v=i("a-table"),S=i("a-pagination"),C=i("a-card");return m(),O(C,{style:{width:"100%"}},{default:o(()=>[c("div",K,[c("div",D,[r(b,null,{default:o(()=>[r(s,null,{default:o(()=>[x("Cửa hàng")]),_:1})]),_:1})]),c("div",M,[r(d,{class:"me-2"},{default:o(()=>[E]),_:1}),r(d,{class:"me-2"},{default:o(()=>[L]),_:1}),r(d,{type:"primary",title:"Thêm mới"},{default:o(()=>[r(l,{to:{name:"admin-store-create"}},{default:o(()=>[Y]),_:1})]),_:1})])]),c("div",J,[c("div",Q,[r(v,{dataSource:n.users,columns:n.columns,scroll:{x:576},pagination:!1},{bodyCell:o(({column:a,index:e,record:y})=>[a.key==="index"?(m(),g("span",W,f(e+1),1)):h("",!0),a.key==="userName"?(m(),g("span",X,f(y.storeName),1)):h("",!0),a.key==="fullName"?(m(),g("span",G,f(y.phoneNumber),1)):h("",!0),a.key==="email"?(m(),g("span",H,f(y.storeType),1)):h("",!0),a.key==="action"&&n.authStoreClaim!==null?(m(),O(N,{key:4,title:"Bạn muốn Khóa bản ghi này?","ok-text":"Yes","cancel-text":"No"},{default:o(()=>[r(l,{to:{name:"ProductByStore",params:{id:y.storeId}}},{default:o(()=>[r(d,{title:"Khóa",type:"dashed",size:"small",shape:"",class:"me-2 text-warning"},{default:o(()=>[x(" sản phẩm ")]),_:1})]),_:2},1032,["to"])]),_:2},1024)):h("",!0)]),_:1},8,["dataSource","columns"]),c("div",Z,[r(S,{onChange:n.onChange,current:n.pageParam.current,"onUpdate:current":_[0]||(_[0]=a=>n.pageParam.current=a),total:n.pageParam.totalRecord,pageSize:n.pageParam.pageSize,"show-total":(a,e)=>`${e[0]}-${e[1]} of ${a} items`,class:"mt-2 text-end"},null,8,["onChange","current","total","pageSize","show-total"])])])])]),_:1})}const ne=R(V,[["render",ee]]);export{ne as default};
