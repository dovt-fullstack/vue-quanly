import{d as F,H as T,r as b,u as $,v as V,x as W,o as j,J as E,b as u,e as N,z as G,w as o,q as H,y as I,g as i,h as t,j as g,f as S,t as k,l as C,M as z}from"./index-64ce397b.js";import{u as J}from"./use-menu-6afec9f3.js";import{A as y,B as K}from"./BaseCommon-86b03c47.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";const X=F({components:{DeleteOutlined:T},setup(){J().onSelectedKeys(["admin-users"]);const a=b($().user.roleClaimDetail),l="http://localhost:9000",P=V(),d=W({optionsLevelManage:[],optionsRole:[],optionsStatus:[]}),O=b({}),v=b(),s=W({userName:"",fullName:"",email:"",passWord:"",rePassWord:"",levelManage:"",roleID:"",status:"",urlAvatar:"",fileAvatar:null,rmavatar:"yes",change_password:!1}),c=b(null),m={userName:[{required:!0,message:"Tài khoản không để trống.",trigger:"change"}],fullName:[{required:!0,message:"Họ tên không để trống.",trigger:"change"}],email:[{required:!0,message:"email không để trống.",trigger:"change"}],passWord:[{required:!0,validator:async(e,r)=>r===""?Promise.reject("Please input the password"):(s.rePassWord!==""&&v.value.validateFields("rePassWord"),Promise.resolve()),trigger:"change"}],rePassWord:[{validator:async(e,r)=>r===""?Promise.reject("Please input the password again"):r!==s.passWord?Promise.reject("Two inputs don't match!"):Promise.resolve(),trigger:"change"}]},p={labelCol:{span:4},wrapperCol:{span:14}},h=()=>{v.value.resetFields()},_=()=>{y.GetOptionsLevelManage().then(e=>{d.optionsLevelManage=e.data,s.levelManage=e.data[0].value}).catch(e=>{console.log(e)})},n=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,M=()=>{y.GetOptionsRole().then(e=>{d.optionsRole=e.data,s.roleID=e.data[0].value}).catch(e=>{console.log(e)})},q=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,R=()=>{y.GetOptionsStatus().then(e=>{d.optionsStatus=e.data,s.status=e.data[0].value}).catch(e=>{console.log(e)})},A=(e,r)=>r.label.toLowerCase().indexOf(e.toLowerCase())>=0,U=()=>{const e={firstname:s.userName,lastname:s.fullName,email:s.email,password:s.passWord};console.log("formState"),console.log(s,"formState"),H.post(`${l}/api/v1/auth/register/user`,e).then(r=>{I.success("Tạo mới thành công!"),P.push({name:"admin-users"})}).catch(r=>{console.log(r)})};j(()=>{h(),_(),R(),M()});const B=e=>{var r=K.GetBase64(e.target.files[0]);r.then(w=>{s.urlAvatar=w,s.rmavatar="no"}).catch(w=>{console.log(w)})},D=()=>{s.urlAvatar=null,s.rmavatar="yes"};return{...E(d),authStoreClaim:a,errors:O,formState:s,fileAvatar:c,formRef:v,rules:m,layout:p,resetForm:h,getOptionsLevelManage:_,getOptionsStatus:R,getOptionsRole:M,filterOptionLevelManage:n,filterOptionRole:q,filterOptionStatus:A,users:d,createUsers:U,handleChangeUpload:B,handleRemoveAvatar:D}}}),Y={class:"row mb-3"},Z={class:"col-12"},x=i("h1",null,null,-1),ee={class:"col-12 col-sm-12 mb-3"},ae={class:"row"},te={class:"col-12 col-sm-9"},se={key:0,class:"text-danger"},oe={key:0,class:"text-danger"},re={key:0,class:"text-danger"},le=i("span",null,"Quay lại",-1);function ne(a,l,P,d,O,v){const s=u("router-link"),c=u("a-breadcrumb-item"),L=u("a-breadcrumb"),f=u("a-input"),m=u("a-form-item"),p=u("a-button"),h=u("a-form"),_=u("a-card");return N(),G(_,{style:{width:"100%"}},{default:o(()=>[i("div",Y,[i("div",Z,[t(L,null,{default:o(()=>[t(c,null,{default:o(()=>[t(s,{to:{name:"admin-dashboards"}},{default:o(()=>[g("Trang chủ")]),_:1})]),_:1}),t(c,null,{default:o(()=>[t(s,{to:{name:"admin-users"}},{default:o(()=>[g("Tài khoản")]),_:1})]),_:1}),t(c,null,{default:o(()=>[g("Thêm mới member")]),_:1})]),_:1}),x]),i("div",ee,[t(h,z({class:"p-3",name:"custom-validation",ref:"formRef",model:a.formState,rules:a.rules},a.layout,{onFinish:l[4]||(l[4]=n=>a.createUsers())}),{default:o(()=>[i("div",ae,[i("div",te,[t(m,{ref:"userName",label:"firstname",required:"",name:"userName"},{default:o(()=>[t(f,{value:a.formState.userName,"onUpdate:value":l[0]||(l[0]=n=>a.formState.userName=n)},null,8,["value"]),a.errors&&a.errors.UserName?(N(),S("small",se,k(a.errors.UserName[0]),1)):C("",!0)]),_:1},512),t(m,{ref:"fullName",label:"lastname",required:"",name:"fullName"},{default:o(()=>[t(f,{value:a.formState.fullName,"onUpdate:value":l[1]||(l[1]=n=>a.formState.fullName=n)},null,8,["value"]),a.errors&&a.errors.FullName?(N(),S("small",oe,k(a.errors.FullName[0]),1)):C("",!0)]),_:1},512),t(m,{ref:"email",label:"Email",rules:[{type:"email"}],required:"",name:"email"},{default:o(()=>[t(f,{value:a.formState.email,"onUpdate:value":l[2]||(l[2]=n=>a.formState.email=n)},null,8,["value"]),a.errors&&a.errors.Email?(N(),S("small",re,k(a.errors.Email[0]),1)):C("",!0)]),_:1},512),t(m,{"has-feedback":"",label:"Mật khẩu",required:"",name:"passWord"},{default:o(()=>[t(f,{value:a.formState.passWord,"onUpdate:value":l[3]||(l[3]=n=>a.formState.passWord=n),type:"password",autocomplete:"off"},null,8,["value"])]),_:1}),t(m,{"wrapper-col":{span:14,offset:4}},{default:o(()=>[t(p,{onClick:a.goBack,class:"me-0 me-sm-2 mb-3 mb-sm-0"},{default:o(()=>[le]),_:1},8,["onClick"]),t(p,{class:"me-0 me-sm-2 mb-3 mb-sm-0 bg-info text-light",onClick:a.resetForm},{default:o(()=>[g("Reset")]),_:1},8,["onClick"]),t(p,{type:"primary","html-type":"submit",class:"bg-success"},{default:o(()=>[g("Lưu")]),_:1})]),_:1})])])]),_:1},16,["model","rules"])])])]),_:1})}const ce=Q(X,[["render",ne]]);export{ce as default};
